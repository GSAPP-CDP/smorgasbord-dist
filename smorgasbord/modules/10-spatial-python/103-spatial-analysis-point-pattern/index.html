<!doctype html>
<html data-n-head-ssr lang="en" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>GSAPP SMORGASBORD</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="description" name="description" content=""><meta data-n-head="ssr" name="format-detection" content="telephone=no"><base href="/smorgasbord/"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link data-n-head="ssr" data-hid="gf-prefetch" rel="dns-prefetch" href="https://fonts.gstatic.com/"><link data-n-head="ssr" data-hid="gf-preconnect" rel="preconnect" href="https://fonts.gstatic.com/" crossorigin=""><link data-n-head="ssr" data-hid="gf-preload" rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&family=IBM Plex Sans:wght@300;400;700"><script data-n-head="ssr" data-hid="gf-script">!function(){var e=document.createElement("link");e.rel="stylesheet",e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&family=IBM Plex Sans:wght@300;400;700",document.querySelector("head").appendChild(e)}()</script><noscript data-n-head="ssr" data-hid="gf-noscript"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&family=IBM Plex Sans:wght@300;400;700"></noscript><link rel="preload" href="https://smorgasbord-dist.s3.us-east-1.amazonaws.com/1cd9192.js" as="script"><link rel="preload" href="https://smorgasbord-dist.s3.us-east-1.amazonaws.com/1033e76.js" as="script"><link rel="preload" href="https://smorgasbord-dist.s3.us-east-1.amazonaws.com/d87c597.js" as="script"><link rel="preload" href="https://smorgasbord-dist.s3.us-east-1.amazonaws.com/b6f68fa.js" as="script"><link rel="preload" href="https://smorgasbord-dist.s3.us-east-1.amazonaws.com/9e6e7d4.js" as="script"><link rel="preload" href="https://smorgasbord-dist.s3.us-east-1.amazonaws.com/5c176c2.js" as="script"><style data-vue-ssr-id="1dfbd988:0 517a8dd7:0 fa7ff0ca:0 145a5c8f:0 34da3673:0 fd42f946:0 f243d9c8:0 411a0fe8:0 7bdc4d5f:0 77b1ef0b:0 3b3e78a8:0">body{margin:0;padding:0}code[class*=language-],pre[class*=language-]{color:#000;background:0 0;text-shadow:0 1px #fff;font-family:Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.nuxt-progress{position:fixed;top:0;left:0;right:0;height:2px;width:0;opacity:1;transition:width .1s,opacity .4s;background-color:#000;z-index:999999}.nuxt-progress.nuxt-progress-notransition{transition:none}.nuxt-progress-failed{background-color:red}#layout-module[data-v-529cb57d]{display:flex;width:100%;height:100vh;background-color:#f2ede7;font-family:"IBM Plex Sans",Helvetica,sans-serif}a[data-v-529cb57d],a[data-v-529cb57d]:visited{color:#555}#nav-column[data-v-529cb57d]{overflow-y:auto;flex-basis:350px;flex-grow:0;flex-shrink:0;padding:20px 30px}#logo[data-v-529cb57d]{height:100px}#content-column[data-v-529cb57d]{overflow-y:auto;width:100%}#graph-column[data-v-529cb57d]{display:none}a[data-v-61c030eb]{text-decoration:none}.smorgasbord[data-v-61c030eb]{font-weight:700;font-size:1.5em}.links[data-v-31cab561]{border-bottom:2px dotted grey;margin-bottom:20px;padding:0 5px 20px}.nav[data-v-31cab561]{color:#4a4a4a;font-weight:700}a[data-v-31cab561]{display:inline-block}.title[data-v-31cab561]{font-size:2em;font-weight:700}.course[data-v-88b1a66c]{border-left:2px solid grey;padding-left:8px}.coursetitle[data-v-88b1a66c]{font-size:1.5em;margin-bottom:10px}.moduleindex[data-v-88b1a66c]{color:555;font-family:Lato;color:#000;font-size:.85em}.sequence[data-v-88b1a66c]{line-height:1.5em;margin-bottom:20px}.active>[data-v-c650d19c],.active[data-v-c650d19c],.nuxt-link-active[data-v-c650d19c]{color:#4cbf8f!important;font-weight:700}.moduleindex[data-v-c650d19c]{color:555;font-family:Lato;color:#000;line-height:1.5em}.sequence[data-v-c650d19c]{font-weight:400}.hover.sequence[data-v-c650d19c]{color:#0096ea!important}a[data-v-c650d19c]{text-decoration:none}a[data-v-c650d19c]:hover{color:#0096ea!important;font-weight:700}ul[data-v-c650d19c]{padding:0 0 0 10px;list-style-type:none}li[data-v-c650d19c]{color:grey}.bullet[data-v-c650d19c]:before{content:"â€¢"}.sequencetitle[data-v-c650d19c]{font-weight:700;font-size:1.15em}.indexview.moduleindex[data-v-c650d19c]{font-size:1.25em}.indexview .sequence[data-v-c650d19c]{display:flex;flex-direction:row;border-top:2px solid #555;padding-top:5px;margin-bottom:5px}.indexview .sequence.hover[data-v-c650d19c]{border-top:2px solid #0096ea}.indexview .sequencetitle[data-v-c650d19c]{width:50%;padding-right:20px}.indexview .sequencemodules[data-v-c650d19c]{width:50%;font-style:italics}.indexview .ul[data-v-c650d19c]{padding-left:0}.post[data-v-4d512e2a]{padding:110px 30px 100px;max-width:800px;font-size:1em;font-weight:regular;color:#444;word-wrap:break-word}p[data-v-4d512e2a]{line-height:1.7em}blockquote[data-v-4d512e2a]{font-size:.9em;line-height:1.8em;color:#666}.postheader[data-v-4d512e2a]{padding-bottom:10px;border-bottom:1px solid #4cbf8f;margin-bottom:10px}.posttitle[data-v-4d512e2a]{font-weight:700;font-size:3em;color:#4cbf8f;margin-bottom:15px;word-break:break-word}.instruction[data-v-4d512e2a]{background-color:#ccc;border-radius:10px;padding:20px 10px}.instruction p[data-v-4d512e2a]:last-child{margin-bottom:0}[data-v-4d512e2a] img{width:100%;height:auto}[data-v-4d512e2a] img[src$="#img-left"]{max-width:50%;max-height:400px;padding:10px 15px 10px 0;float:left;clear:both}[data-v-4d512e2a] img[src$="#img-right"]{float:right;max-width:50%;max-height:400px;padding:10px 0 10px 15px;clear:both}[data-v-4d512e2a] h1,[data-v-4d512e2a] h2,[data-v-4d512e2a] h3,[data-v-4d512e2a] h4{clear:both}[data-v-4d512e2a] h3,[data-v-4d512e2a] h4{padding-top:2em}div.img+em[data-v-4d512e2a],img+em[data-v-4d512e2a]{color:#888;margin-bottom:10px;display:inline-block}.val[data-v-4d512e2a]{font-weight:700}[data-v-4d512e2a] code{background-color:#f4f4f4;padding:3px 6px;border-radius:5px}[data-v-4d512e2a] blockquote{border-left:2px solid #666;padding-left:20px;margin-left:10px;color:#666}.copyright[data-v-2354a23f]{color:#4a4a4a;font-size:.85em;padding:30px}a[data-v-2354a23f]:hover{color:#fd1789;border-bottom:1px dotted grey}.graph[data-v-9c60a860]{overflow:auto;height:100%}</style><link rel="preload" href="https://smorgasbord-dist.s3.us-east-1.amazonaws.com/static/1652167150/modules/10-spatial-python/103-spatial-analysis-point-pattern/state.js" as="script"><link rel="preload" href="https://smorgasbord-dist.s3.us-east-1.amazonaws.com/static/1652167150/modules/10-spatial-python/103-spatial-analysis-point-pattern/payload.js" as="script"><link rel="preload" href="https://smorgasbord-dist.s3.us-east-1.amazonaws.com/static/1652167150/manifest.js" as="script">
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div id="layout-module" data-v-529cb57d><div id="nav-column" data-v-529cb57d><div id="logo" data-v-529cb57d><div class="logo" style="width:220px" data-v-61c030eb data-v-529cb57d><a href="/smorgasbord/" class="nuxt-link-active" data-v-61c030eb><img src="https://smorgasbord-dist.s3.us-east-1.amazonaws.com/img/logo_full.f44c15c.svg" data-v-61c030eb></a></div></div> <div id="nav" data-v-529cb57d><div class="nav" data-v-31cab561 data-v-529cb57d><div class="links" data-v-31cab561><div class="navlink" data-v-31cab561><a href="/smorgasbord/welcome" data-v-31cab561>Welcome</a></div> <div class="navlink" data-v-31cab561><a href="/smorgasbord/how-to-use-this-site" data-v-31cab561>How To Use This Site</a></div></div> <div class="moduleindex" data-v-88b1a66c data-v-31cab561><div class="coursetitle" data-v-88b1a66c>Mapping and Data</div> <div class="course" data-v-88b1a66c><div class="sequence" data-v-c650d19c data-v-88b1a66c><div class="sequencetitle" data-v-c650d19c><a href="/smorgasbord/modules/14-geospatial-concepts/index" data-v-c650d19c>Introduction to Geographic Information Systems Concepts</a></div> <ol class="sequencemodules" data-v-c650d19c><!----><li data-v-c650d19c><a href="/smorgasbord/modules/14-geospatial-concepts/141-what-is-gis" data-v-c650d19c> What is GIS?</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/14-geospatial-concepts/142-spatial-data" data-v-c650d19c> Spatial Data</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/14-geospatial-concepts/143-coordinates-projections" data-v-c650d19c> Coordinate Reference Systems & Projections</a></li></ol></div> <div class="sequence" data-v-c650d19c data-v-88b1a66c><div class="sequencetitle" data-v-c650d19c><a href="/smorgasbord/modules/15-intro-qgis/index" data-v-c650d19c>Introduction to GIS with QGIS</a></div> <ol class="sequencemodules" data-v-c650d19c><!----><li data-v-c650d19c><a href="/smorgasbord/modules/15-intro-qgis/151-mapping-where" data-v-c650d19c> Mapping Where</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/15-intro-qgis/152-print-layout" data-v-c650d19c> Print Layout</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/15-intro-qgis/153-archives" data-v-c650d19c> Making data from Archives</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/15-intro-qgis/154-observations" data-v-c650d19c> Making Data from Field Observations</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/15-intro-qgis/155-satellites" data-v-c650d19c> Making Data from Satellites</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/15-intro-qgis/156-aerial-imagery" data-v-c650d19c> Making Data from</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/15-intro-qgis/157-atlas" data-v-c650d19c> A Subjective Atlas</a></li></ol></div></div> <div class="coursetitle" data-v-88b1a66c>Computational Drawing</div> <div class="course" data-v-88b1a66c><div class="sequence" data-v-c650d19c data-v-88b1a66c><div class="sequencetitle" data-v-c650d19c><a href="/smorgasbord/modules/12-rhino-intro/index" data-v-c650d19c>Introduction to Rhino</a></div> <ol class="sequencemodules" data-v-c650d19c><!----><li data-v-c650d19c><a href="/smorgasbord/modules/12-rhino-intro/12-1_rhino-interface" data-v-c650d19c> The Rhino Interface</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/12-rhino-intro/12-2_rhino-2d" data-v-c650d19c> Rhino 2D</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/12-rhino-intro/12-3_rhino-3d" data-v-c650d19c> Rhino 3D</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/12-rhino-intro/12-4_rhino-nurbs" data-v-c650d19c> Modeling with NURBS</a></li></ol></div> <div class="sequence" data-v-c650d19c data-v-88b1a66c><div class="sequencetitle" data-v-c650d19c><a href="/smorgasbord/modules/13-arch-drawing/index" data-v-c650d19c>Introduction to Architectural Drawing</a></div> <ol class="sequencemodules" data-v-c650d19c><!----><li data-v-c650d19c><a href="/smorgasbord/modules/13-arch-drawing/13-1_orthographic-drawing" data-v-c650d19c> Orthographic Drawing: Plans & Sections</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/13-arch-drawing/13-2_projection" data-v-c650d19c> Projection</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/13-arch-drawing/13-3_rendering" data-v-c650d19c> Lighting, Materials & Rendering</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/13-arch-drawing/13-4_compositing" data-v-c650d19c> Compositing</a></li></ol></div></div> <div class="coursetitle" data-v-88b1a66c>Programming for Design Practices: A - Grasshopper</div> <div class="course" data-v-88b1a66c><div class="sequence" data-v-c650d19c data-v-88b1a66c><div class="sequencetitle" data-v-c650d19c><a href="/smorgasbord/modules/4-grasshopper-intro/index" data-v-c650d19c>Intro To Grasshopper</a></div> <ol class="sequencemodules" data-v-c650d19c><!----><li data-v-c650d19c><a href="/smorgasbord/modules/4-grasshopper-intro/41-getting-started-with-grasshopper" data-v-c650d19c> Getting started with Grasshopper</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/4-grasshopper-intro/42-exercise-hello-grasshopper" data-v-c650d19c> Exercise - Hello Grasshopper!</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/4-grasshopper-intro/43-working-in-grasshopper" data-v-c650d19c> Working in Grasshopper</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/4-grasshopper-intro/44-exercise-parametric-tower-part-1" data-v-c650d19c> Exercise - Parametric tower (part 1)</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/4-grasshopper-intro/45-working-with-data" data-v-c650d19c> Working with data</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/4-grasshopper-intro/46-exercise-parametric-tower-part-2" data-v-c650d19c> Exercise - Parametric tower (part 2)</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/4-grasshopper-intro/47-documentation-best-practices" data-v-c650d19c> Grasshopper Documentation Best Practices</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/4-grasshopper-intro/48-Deriving-Spatial-Data" data-v-c650d19c> Deriving Spatial Data</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/4-grasshopper-intro/49-Procedural-Rules" data-v-c650d19c> Parametric to Procedural</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/4-grasshopper-intro/410-Generating-Exploring-Spatial-Data" data-v-c650d19c> Generating and Exploring Spatial Data</a></li></ol></div> <div class="sequence" data-v-c650d19c data-v-88b1a66c><div class="sequencetitle" data-v-c650d19c><a href="/smorgasbord/modules/5-computational-design-modeling-in-grasshopper/index" data-v-c650d19c>Computational Design Modeling In Grasshopper</a></div> <ol class="sequencemodules" data-v-c650d19c><!----><li data-v-c650d19c><a href="/smorgasbord/modules/5-computational-design-modeling-in-grasshopper/5-1-Comp-Design-Modeling" data-v-c650d19c> What is a Computational Design Model?</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/5-computational-design-modeling-in-grasshopper/5-2-Subdivide-Geometry" data-v-c650d19c> Subdividing Geometry for Analysis</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/5-computational-design-modeling-in-grasshopper/5-3-Analysis-Tools" data-v-c650d19c> Building Custom Analysis Tools</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/5-computational-design-modeling-in-grasshopper/5-4-Street-Grid" data-v-c650d19c> Parametric Streets, Blocks, and Parcels</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/5-computational-design-modeling-in-grasshopper/5-5_Buildings-Density" data-v-c650d19c> Procedural Density and Building Types</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/5-computational-design-modeling-in-grasshopper/5-6_Troubleshooting" data-v-c650d19c> Putting Everything Together</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/5-computational-design-modeling-in-grasshopper/5-7_Design-Space" data-v-c650d19c> Creating a Design Space and Exploring results</a></li></ol></div></div> <div class="coursetitle" data-v-88b1a66c>Programming for Design Practices: B - Python</div> <div class="course" data-v-88b1a66c><div class="sequence" data-v-c650d19c data-v-88b1a66c><div class="sequencetitle" data-v-c650d19c><a href="/smorgasbord/modules/6-intro-to-python/index" data-v-c650d19c>Intro to Python</a></div> <ol class="sequencemodules" data-v-c650d19c><!----><li data-v-c650d19c><a href="/smorgasbord/modules/6-intro-to-python/61-getting-started-with-Python" data-v-c650d19c> Getting started with Python</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/6-intro-to-python/62-using-python-in-grasshopper" data-v-c650d19c> Using Python in Grasshopper</a></li></ol></div> <div class="sequence" data-v-c650d19c data-v-88b1a66c><div class="sequencetitle" data-v-c650d19c><a href="/smorgasbord/modules/7-fundamentals-of-python/index" data-v-c650d19c>Fundamentals of Python</a></div> <ol class="sequencemodules" data-v-c650d19c><!----><li data-v-c650d19c><a href="/smorgasbord/modules/7-fundamentals-of-python/71-variables-lists-and-dictionaries" data-v-c650d19c> Variables, Lists, and Dictionaries</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/7-fundamentals-of-python/72-conditionals-and-loops" data-v-c650d19c> Conditionals and Loops</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/7-fundamentals-of-python/73-functions-and-classes" data-v-c650d19c> Functions and Classes</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/7-fundamentals-of-python/74-python-libraries" data-v-c650d19c> Python Libraries</a></li></ol></div> <div class="sequence" data-v-c650d19c data-v-88b1a66c><div class="sequencetitle" data-v-c650d19c><a href="/smorgasbord/modules/8-intro-to-python-in-rhino/index" data-v-c650d19c>Intro to Python Scripting in Rhino</a></div> <ol class="sequencemodules" data-v-c650d19c><!----><li data-v-c650d19c><a href="/smorgasbord/modules/8-intro-to-python-in-rhino/81-accessing-the-rhino-apis-in-python" data-v-c650d19c> Accessing with the Rhino Libraries in Python</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/8-intro-to-python-in-rhino/82-working-with-geometry-in-python" data-v-c650d19c> Working with geometry in Python</a></li></ol></div> <div class="sequence" data-v-c650d19c data-v-88b1a66c><div class="sequencetitle" data-v-c650d19c><a href="/smorgasbord/modules/10-spatial-python/index" data-v-c650d19c>Working with Spatial Data in Python</a></div> <ol class="sequencemodules" data-v-c650d19c><!----><li data-v-c650d19c><a href="/smorgasbord/modules/10-spatial-python/101-data-manipulation" data-v-c650d19c> Data Manipulation</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/10-spatial-python/102-geospatial-data" data-v-c650d19c> Geospatial Data</a></li><li class="active" data-v-c650d19c><a href="/smorgasbord/modules/10-spatial-python/103-spatial-analysis-point-pattern" aria-current="page" class="nuxt-link-exact-active nuxt-link-active" data-v-c650d19c> Spatial Analysis â€“ Point Patterns</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/10-spatial-python/104-spatial-analysis-correlation" data-v-c650d19c> Spatial Analysis â€“ Correlation</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/10-spatial-python/105-spatial-analysis-clustering" data-v-c650d19c> Spatial Analysis â€“ Clustering</a></li></ol></div></div> <div class="coursetitle" data-v-88b1a66c>Programming for Design Practices: C - Web and Interactivity</div> <div class="course" data-v-88b1a66c><div class="sequence" data-v-c650d19c data-v-88b1a66c><div class="sequencetitle" data-v-c650d19c><a href="/smorgasbord/modules/11-interactive-web/index" data-v-c650d19c>Interactive Web</a></div> <ol class="sequencemodules" data-v-c650d19c><!----><li data-v-c650d19c><a href="/smorgasbord/modules/11-interactive-web/110-javascript-in-browser" data-v-c650d19c> Javascript in the Browser I - Weather UI Design</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/11-interactive-web/111-data-and-apis" data-v-c650d19c> Data and APIs</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/11-interactive-web/112-javascript-in-the-browser" data-v-c650d19c> JavaScript in the Browser II - Events and UIs</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/11-interactive-web/113-javascript-in-the-browser" data-v-c650d19c> JavaScript in the Browser III - Events and UIs</a></li></ol></div> <div class="sequence" data-v-c650d19c data-v-88b1a66c><div class="sequencetitle" data-v-c650d19c><a href="/smorgasbord/modules/16-ambient-computing-network-architecture/index" data-v-c650d19c>Ambient Computing - Network Architecture</a></div> <ol class="sequencemodules" data-v-c650d19c><!----><li data-v-c650d19c><a href="/smorgasbord/modules/16-ambient-computing-network-architecture/161-dynamic-environments" data-v-c650d19c> Ambient Environments</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/16-ambient-computing-network-architecture/162-network-architecture" data-v-c650d19c> Network Architecture</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/16-ambient-computing-network-architecture/163-low-and-high-programming" data-v-c650d19c> Low and High Programming</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/16-ambient-computing-network-architecture/164-Intro-to-Processing-Lighting" data-v-c650d19c> Intro to Processing</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/16-ambient-computing-network-architecture/165-Webhooks-Connecting-IFTTT-and-Processing" data-v-c650d19c> Webhooks - Connecting IFTTT and Processing</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/16-ambient-computing-network-architecture/166-sounds-speech-and-macros" data-v-c650d19c> Sounds, Speech, and Macros</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/16-ambient-computing-network-architecture/167-Markers-and-Tracking" data-v-c650d19c> Markers and Tracking</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/16-ambient-computing-network-architecture/168-Computer-Vision" data-v-c650d19c> Computer Vision</a></li></ol></div> <!----> <div class="sequence" data-v-c650d19c data-v-88b1a66c><div class="sequencetitle" data-v-c650d19c><a href="/smorgasbord/modules/18-behavioral-modeling-intro/index" data-v-c650d19c>Behavioral Modeling - Intro</a></div> <ol class="sequencemodules" data-v-c650d19c><!----><li data-v-c650d19c><a href="/smorgasbord/modules/18-behavioral-modeling-intro/181-Unity-and-Agent-Based-Models" data-v-c650d19c> Agent Based Modeling</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/18-behavioral-modeling-intro/182-Intro-To-Unity" data-v-c650d19c> Intro to Unity</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/18-behavioral-modeling-intro/183-Agent-Based-Populations-and-Behavior-Bricks" data-v-c650d19c> Agent Based Modeling and Behavior Bricks</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/18-behavioral-modeling-intro/184-Mapbox-SDK-and-Routing" data-v-c650d19c> Mapbox SDK</a></li></ol></div></div></div> <div class="navlink" data-v-31cab561><a href="/smorgasbord/credits" data-v-31cab561>Credits</a></div></div></div></div> <div id="content-column" data-v-529cb57d><div data-v-529cb57d><div data-fetch-key="data-v-4d512e2a:0" class="post" data-v-4d512e2a><div class="postheader" data-v-4d512e2a><div class="posttitle" data-v-4d512e2a><span class="val" data-v-4d512e2a>Spatial Analysis â€“ Point Patterns</span></div> <div class="postauthor" data-v-4d512e2a>by <span class="val" data-v-4d512e2a>Carlo Bailey</span></div> <!----></div> <div class="postbody" data-v-4d512e2a><div class="nuxt-content" data-v-4d512e2a data-v-4d512e2a><h1 id="spatial-analysis---point-patterns" data-v-4d512e2a data-v-4d512e2a><a href="#spatial-analysis---point-patterns" aria-hidden="true" tabindex="-1" data-v-4d512e2a data-v-4d512e2a><span class="icon icon-link" data-v-4d512e2a data-v-4d512e2a></span></a>Spatial Analysis - Point Patterns</h1>
<p data-v-4d512e2a data-v-4d512e2a></p><div class="img" data-v-34c0681c data-v-4d512e2a><img src="https://smorgasbord-dist.s3.us-east-1.amazonaws.com/img/diana_lange.e6cd228.jpg" alt="missing-image" data-v-34c0681c></div>
<em data-v-4d512e2a data-v-4d512e2a>Diana Lange, Generative portraits (made with Processing), Laurie Anderson</em><p></p>
<h2 id="module-summary" data-v-4d512e2a data-v-4d512e2a><a href="#module-summary" aria-hidden="true" tabindex="-1" data-v-4d512e2a data-v-4d512e2a><span class="icon icon-link" data-v-4d512e2a data-v-4d512e2a></span></a>Module Summary</h2>
<p data-v-4d512e2a data-v-4d512e2a>In this module we discuss analytic methods commonly used to interrogate spatial data, namely, point pattern analysis. Point pattern analysis concerns the spatial arrangement and distribution of things in geographic space. For example, we might consider the location of trees in NYC and ask: Are trees equally dispersed throughout the city (point pattern analysis)?
Or, are there regions within the city with higher densities of trees? Point pattern analysis helps us answer these questions quantitatively and visualize or describe them statistically.</p>
<p data-v-4d512e2a data-v-4d512e2a>We will extend some of the topics explored in the previous module on geospatial data, that of discretization, to develop new methods for characterizing spatial phenomena. Again, we will be using the GeoPandas and Shapely libraries to manipulate geometric and geographic data in Python.</p>
<hr data-v-4d512e2a data-v-4d512e2a>
<br data-v-4d512e2a data-v-4d512e2a>
<br data-v-4d512e2a data-v-4d512e2a>
<p data-v-4d512e2a data-v-4d512e2a>For this module we will be using the <a href="https://pandas.pydata.org/" rel="nofollow noopener noreferrer" target="_blank" data-v-4d512e2a data-v-4d512e2a>Pandas</a>, <a href="https://geopandas.org/en/stable/" rel="nofollow noopener noreferrer" target="_blank" data-v-4d512e2a data-v-4d512e2a>GeoPandas</a>, <a href="https://matplotlib.org/" rel="nofollow noopener noreferrer" target="_blank" data-v-4d512e2a data-v-4d512e2a>Matplotlib</a>, <a href="https://seaborn.pydata.org/" rel="nofollow noopener noreferrer" target="_blank" data-v-4d512e2a data-v-4d512e2a>Seaborn</a> and <a href="https://shapely.readthedocs.io/en/stable/manual.html" rel="nofollow noopener noreferrer" target="_blank" data-v-4d512e2a data-v-4d512e2a>Shapely</a> Python libraries. Ensure to <code data-v-4d512e2a data-v-4d512e2a>pip install</code> them on your machine, if you don't already have them, and import like so:</p>
<div class="nuxt-content-highlight" data-v-4d512e2a data-v-4d512e2a><pre class="line-numbers language-python" data-v-4d512e2a data-v-4d512e2a><code data-v-4d512e2a data-v-4d512e2a><span class="token keyword" data-v-4d512e2a data-v-4d512e2a>import</span> pandas <span class="token keyword" data-v-4d512e2a data-v-4d512e2a>as</span> pd
<span class="token keyword" data-v-4d512e2a data-v-4d512e2a>import</span> geopandas <span class="token keyword" data-v-4d512e2a data-v-4d512e2a>as</span> gpd
<span class="token keyword" data-v-4d512e2a data-v-4d512e2a>import</span> matplotlib<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>.</span>pyplot <span class="token keyword" data-v-4d512e2a data-v-4d512e2a>as</span> plt
<span class="token keyword" data-v-4d512e2a data-v-4d512e2a>import</span> seaborn <span class="token keyword" data-v-4d512e2a data-v-4d512e2a>as</span> sns
<span class="token keyword" data-v-4d512e2a data-v-4d512e2a>from</span> shapely<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>.</span>geometry <span class="token keyword" data-v-4d512e2a data-v-4d512e2a>import</span> Point<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>,</span> Polygon
</code></pre></div>
<br data-v-4d512e2a data-v-4d512e2a>
<h3 id="point-pattern-analysis" data-v-4d512e2a data-v-4d512e2a><a href="#point-pattern-analysis" aria-hidden="true" tabindex="-1" data-v-4d512e2a data-v-4d512e2a><span class="icon icon-link" data-v-4d512e2a data-v-4d512e2a></span></a>Point Pattern Analysis</h3>
<p data-v-4d512e2a data-v-4d512e2a>Points in the context of spatial data usually take one of two forms. 1) Points can represent a spot measurement taken from a larger continuous process â€“ for example, when measuring temperature in an urban environment, the temperature is recorded at a particular latitude longitude where the sensor is located. Here the location of points could take place anywhere, but is generally limited to few locations that are determined by the cost of sampling or the desired resolution of gathering readings. 2) Points can also represent a fixed object in space, say, a location of trees or the location of a schools in a city. Points in this context usually are driven by some underlying process that makes their location not random. It is this latter event that we will be concerned with for point pattern analysis. Our goal in point pattern analysis is to determine the underlying process as to why the particular object or event occurred where it did. To stick with the NYC tree census example, we might ask: is there a pattern to the location of trees? why are there trees in some places and not in others? We could ask these same questions for practically any object you find in cities or rural communities.</p>
<p data-v-4d512e2a data-v-4d512e2a>We will introduce concepts of point pattern analysis sticking with the 2015 NYC tree census data. To get started let's load the data into a Pandas DataFrame:</p>
<div class="nuxt-content-highlight" data-v-4d512e2a data-v-4d512e2a><pre class="line-numbers language-python" data-v-4d512e2a data-v-4d512e2a><code data-v-4d512e2a data-v-4d512e2a>path <span class="token operator" data-v-4d512e2a data-v-4d512e2a>=</span> <span class="token string" data-v-4d512e2a data-v-4d512e2a>'data/2015_Street_Tree_Census_-_Tree_Data.csv'</span>
df <span class="token operator" data-v-4d512e2a data-v-4d512e2a>=</span> pd<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>.</span>read_csv<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>(</span>path<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>)</span>
</code></pre></div>
<p data-v-4d512e2a data-v-4d512e2a>As we loaded the data from a <code data-v-4d512e2a data-v-4d512e2a>.csv</code> we will next need to convert this to a GeoDataFrame so that we can easily visualize and manipulate the data spatially. To do that we will create a function to convert the <code data-v-4d512e2a data-v-4d512e2a>'latitude'</code> + <code data-v-4d512e2a data-v-4d512e2a>'longitude'</code> columns (float values) to a Shapely <code data-v-4d512e2a data-v-4d512e2a>Point</code> object (a geometry class in Python). The function will take an input called <code data-v-4d512e2a data-v-4d512e2a>data</code> and return a Shapely object. We will make use of <code data-v-4d512e2a data-v-4d512e2a>.apply</code> functions in Pandas to conveniently iterate over the entire DataFrame:</p>
<div class="nuxt-content-highlight" data-v-4d512e2a data-v-4d512e2a><pre class="line-numbers language-python" data-v-4d512e2a data-v-4d512e2a><code data-v-4d512e2a data-v-4d512e2a><span class="token keyword" data-v-4d512e2a data-v-4d512e2a>def</span> <span class="token function" data-v-4d512e2a data-v-4d512e2a>lat_lng_to_point</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>(</span>data<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>)</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>:</span>
    <span class="token keyword" data-v-4d512e2a data-v-4d512e2a>return</span> Point<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>(</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>[</span>data<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>[</span><span class="token string" data-v-4d512e2a data-v-4d512e2a>'longitude'</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>]</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>,</span> data<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>[</span><span class="token string" data-v-4d512e2a data-v-4d512e2a>'latitude'</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>]</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>]</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>)</span>

df<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>[</span><span class="token string" data-v-4d512e2a data-v-4d512e2a>'geom'</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>]</span> <span class="token operator" data-v-4d512e2a data-v-4d512e2a>=</span> df<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>.</span><span class="token builtin" data-v-4d512e2a data-v-4d512e2a>apply</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>(</span>lat_lng_to_point<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>,</span> axis<span class="token operator" data-v-4d512e2a data-v-4d512e2a>=</span><span class="token number" data-v-4d512e2a data-v-4d512e2a>1</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>)</span>
</code></pre></div>
<p data-v-4d512e2a data-v-4d512e2a>You should now see an extra column in the DataFrame called <code data-v-4d512e2a data-v-4d512e2a>'geom'</code> that consists of Point objects:</p>
<div class="nuxt-content-highlight" data-v-4d512e2a data-v-4d512e2a><pre class="line-numbers language-python" data-v-4d512e2a data-v-4d512e2a><code data-v-4d512e2a data-v-4d512e2a>df<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>[</span><span class="token string" data-v-4d512e2a data-v-4d512e2a>'geom'</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>]</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>.</span>head<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>(</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>)</span>
</code></pre></div>
<div class="nuxt-content-highlight" data-v-4d512e2a data-v-4d512e2a><pre class="line-numbers language-text" data-v-4d512e2a data-v-4d512e2a><code data-v-4d512e2a data-v-4d512e2a>0    POINT (-73.84421522 40.72309177)
1    POINT (-73.81867946 40.79411067)
2     POINT (-73.9366077 40.71758074)
3    POINT (-73.93445616 40.71353749)
4    POINT (-73.97597938 40.66677776)
Name: geom, dtype: object
</code></pre></div>
<p data-v-4d512e2a data-v-4d512e2a>Now we are ready to convert the DataFrame to a GeoDataFrame with geographies. To do this we need to tell GeoPandas what column contains geometries and the CRS we want to use for projection (we will first use <a href="https://geopandas.org/en/stable/docs/user_guide/projections.html" rel="nofollow noopener noreferrer" target="_blank" data-v-4d512e2a data-v-4d512e2a>a common CRS</a> projection):</p>
<div class="nuxt-content-highlight" data-v-4d512e2a data-v-4d512e2a><pre class="line-numbers language-python" data-v-4d512e2a data-v-4d512e2a><code data-v-4d512e2a data-v-4d512e2a>gdf <span class="token operator" data-v-4d512e2a data-v-4d512e2a>=</span> gpd<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>.</span>GeoDataFrame<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>(</span>df<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>,</span> geometry<span class="token operator" data-v-4d512e2a data-v-4d512e2a>=</span><span class="token string" data-v-4d512e2a data-v-4d512e2a>'geom'</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>)</span>
gdf<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>.</span>crs <span class="token operator" data-v-4d512e2a data-v-4d512e2a>=</span> <span class="token string" data-v-4d512e2a data-v-4d512e2a>'EPSG:4326'</span>
</code></pre></div>
<p data-v-4d512e2a data-v-4d512e2a>Now let's visualize the data! To do so we will first filter the GeoDataFrame to only show trees in Manhattan. We can use the <code data-v-4d512e2a data-v-4d512e2a>'zip_city'</code> column and add a condition that only includes rows that are in 'New York' (AKA the Manhattan borough). Notice that we specify the marker and figure size (with the <code data-v-4d512e2a data-v-4d512e2a>figsize</code> + <code data-v-4d512e2a data-v-4d512e2a>markersize</code> arguments) in order to increase the resolution of the plot:</p>
<div class="nuxt-content-highlight" data-v-4d512e2a data-v-4d512e2a><pre class="line-numbers language-python" data-v-4d512e2a data-v-4d512e2a><code data-v-4d512e2a data-v-4d512e2a>gdf<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>.</span>loc<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>[</span>gdf<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>[</span><span class="token string" data-v-4d512e2a data-v-4d512e2a>'zip_city'</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>]</span><span class="token operator" data-v-4d512e2a data-v-4d512e2a>==</span><span class="token string" data-v-4d512e2a data-v-4d512e2a>'New York'</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>]</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>.</span>plot<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>(</span>figsize<span class="token operator" data-v-4d512e2a data-v-4d512e2a>=</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>(</span><span class="token number" data-v-4d512e2a data-v-4d512e2a>12</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>,</span><span class="token number" data-v-4d512e2a data-v-4d512e2a>14</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>)</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>,</span> markersize<span class="token operator" data-v-4d512e2a data-v-4d512e2a>=</span><span class="token number" data-v-4d512e2a data-v-4d512e2a>0.25</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>)</span>
</code></pre></div>
<p data-v-4d512e2a data-v-4d512e2a></p><div class="img" data-v-34c0681c data-v-4d512e2a><img src="https://smorgasbord-dist.s3.us-east-1.amazonaws.com/img/tree-dots.66b2a4a.png" alt="missing-image" data-v-34c0681c></div><p></p>
<p data-v-4d512e2a data-v-4d512e2a>Although we can make out the shape of Manhattan, the tree locations by themselves appear as dots in arbitrary whitespace, lacking geographical context. Luckily, adding context in GeoPandas is fairly easy with the <code data-v-4d512e2a data-v-4d512e2a>contextily</code> Python library. Contextily works by loading Web map tiles into the GeoPandas plot. Web map tiles are usually provided in a certain CRS projection, <code data-v-4d512e2a data-v-4d512e2a>EPSG 3857</code>, so we will have to update the CRS of our GeoDataFrame to match:</p>
<div class="nuxt-content-highlight" data-v-4d512e2a data-v-4d512e2a><pre class="line-numbers language-python" data-v-4d512e2a data-v-4d512e2a><code data-v-4d512e2a data-v-4d512e2a><span class="token comment" data-v-4d512e2a data-v-4d512e2a># change the CRS</span>
gdf <span class="token operator" data-v-4d512e2a data-v-4d512e2a>=</span> gdf<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>.</span>to_crs<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>(</span>epsg<span class="token operator" data-v-4d512e2a data-v-4d512e2a>=</span><span class="token number" data-v-4d512e2a data-v-4d512e2a>3857</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>)</span>

ax <span class="token operator" data-v-4d512e2a data-v-4d512e2a>=</span> gdf<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>.</span>loc<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>[</span>gdf<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>[</span><span class="token string" data-v-4d512e2a data-v-4d512e2a>'zip_city'</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>]</span><span class="token operator" data-v-4d512e2a data-v-4d512e2a>==</span><span class="token string" data-v-4d512e2a data-v-4d512e2a>'New York'</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>]</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>.</span>plot<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>(</span>figsize<span class="token operator" data-v-4d512e2a data-v-4d512e2a>=</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>(</span><span class="token number" data-v-4d512e2a data-v-4d512e2a>12</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>,</span><span class="token number" data-v-4d512e2a data-v-4d512e2a>14</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>)</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>,</span> markersize<span class="token operator" data-v-4d512e2a data-v-4d512e2a>=</span><span class="token number" data-v-4d512e2a data-v-4d512e2a>0.25</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>)</span>
cx<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>.</span>add_basemap<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>(</span>ax<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>,</span> source<span class="token operator" data-v-4d512e2a data-v-4d512e2a>=</span>cx<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>.</span>providers<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>.</span>Stamen<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>.</span>TonerLite<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>)</span>
ax<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>.</span>set_axis_off<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>(</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>)</span>
</code></pre></div>
<p data-v-4d512e2a data-v-4d512e2a></p><div class="img" data-v-34c0681c data-v-4d512e2a><img src="https://smorgasbord-dist.s3.us-east-1.amazonaws.com/img/stamen-tree-dots.5aafce2.png" alt="missing-image" data-v-34c0681c></div><p></p>
<p data-v-4d512e2a data-v-4d512e2a>The above plots do not tell us much about the structure of points across the city however, the amount of points on the map hide the underlying distribution not revealing whether some areas have a higher concentration than others. One way to get around this is to use polygons or an underlying grid to bucket the points into regular regions and then count the number of points within each region. This is similar to the use of <a href="https://en.wikipedia.org/wiki/Histogram" rel="nofollow noopener noreferrer" target="_blank" data-v-4d512e2a data-v-4d512e2a>histograms</a> to visualize the distribution of numerical data.</p>
<p data-v-4d512e2a data-v-4d512e2a>To create the grid in GeoPandas we will use the x + y bounds of the tree dataset to define our overall region, and subdivide this region into grid cells (giving each cell a unique identifier to help with analysis):</p>
<div class="nuxt-content-highlight" data-v-4d512e2a data-v-4d512e2a><pre class="line-numbers language-python" data-v-4d512e2a data-v-4d512e2a><code data-v-4d512e2a data-v-4d512e2a><span class="token comment" data-v-4d512e2a data-v-4d512e2a># filter the tree dataset to only those within Manhattan</span>
manhattan_trees <span class="token operator" data-v-4d512e2a data-v-4d512e2a>=</span> gdf<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>.</span>loc<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>[</span>gdf<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>[</span><span class="token string" data-v-4d512e2a data-v-4d512e2a>'zip_city'</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>]</span><span class="token operator" data-v-4d512e2a data-v-4d512e2a>==</span><span class="token string" data-v-4d512e2a data-v-4d512e2a>'New York'</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>]</span>

<span class="token comment" data-v-4d512e2a data-v-4d512e2a># get the outer bounds of the points</span>
xmin<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>,</span> ymin<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>,</span> xmax<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>,</span> ymax <span class="token operator" data-v-4d512e2a data-v-4d512e2a>=</span> manhattan_trees<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>.</span>total_bounds

<span class="token comment" data-v-4d512e2a data-v-4d512e2a># specify the number of cells along x + y axis</span>
x <span class="token operator" data-v-4d512e2a data-v-4d512e2a>=</span> <span class="token number" data-v-4d512e2a data-v-4d512e2a>40</span>
y <span class="token operator" data-v-4d512e2a data-v-4d512e2a>=</span> <span class="token number" data-v-4d512e2a data-v-4d512e2a>80</span>
wide <span class="token operator" data-v-4d512e2a data-v-4d512e2a>=</span> <span class="token builtin" data-v-4d512e2a data-v-4d512e2a>abs</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>(</span>xmin <span class="token operator" data-v-4d512e2a data-v-4d512e2a>-</span> xmax<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>)</span><span class="token operator" data-v-4d512e2a data-v-4d512e2a>/</span>x
length <span class="token operator" data-v-4d512e2a data-v-4d512e2a>=</span> <span class="token builtin" data-v-4d512e2a data-v-4d512e2a>abs</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>(</span>ymin <span class="token operator" data-v-4d512e2a data-v-4d512e2a>-</span> ymax<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>)</span><span class="token operator" data-v-4d512e2a data-v-4d512e2a>/</span>y

<span class="token comment" data-v-4d512e2a data-v-4d512e2a># create a list of points that will define grid corners</span>
cols <span class="token operator" data-v-4d512e2a data-v-4d512e2a>=</span> np<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>.</span>arange<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>(</span>xmin<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>,</span> xmax <span class="token operator" data-v-4d512e2a data-v-4d512e2a>+</span> wide<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>,</span> wide<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>)</span>
rows <span class="token operator" data-v-4d512e2a data-v-4d512e2a>=</span> np<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>.</span>arange<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>(</span>ymin<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>,</span> ymax <span class="token operator" data-v-4d512e2a data-v-4d512e2a>+</span> length<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>,</span> length<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>)</span>

<span class="token comment" data-v-4d512e2a data-v-4d512e2a># iterate over list of corners to create Shapely Polygon objects</span>
polygons <span class="token operator" data-v-4d512e2a data-v-4d512e2a>=</span> <span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>[</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>]</span>
<span class="token keyword" data-v-4d512e2a data-v-4d512e2a>for</span> x <span class="token keyword" data-v-4d512e2a data-v-4d512e2a>in</span> cols<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>[</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>:</span><span class="token operator" data-v-4d512e2a data-v-4d512e2a>-</span><span class="token number" data-v-4d512e2a data-v-4d512e2a>1</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>]</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>:</span>
    <span class="token keyword" data-v-4d512e2a data-v-4d512e2a>for</span> y <span class="token keyword" data-v-4d512e2a data-v-4d512e2a>in</span> rows<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>[</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>:</span><span class="token operator" data-v-4d512e2a data-v-4d512e2a>-</span><span class="token number" data-v-4d512e2a data-v-4d512e2a>1</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>]</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>:</span>
        polygons<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>.</span>append<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>(</span>Polygon<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>(</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>[</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>(</span>x<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>,</span>y<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>)</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>,</span> <span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>(</span>x<span class="token operator" data-v-4d512e2a data-v-4d512e2a>+</span>wide<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>,</span> y<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>)</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>,</span> <span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>(</span>x<span class="token operator" data-v-4d512e2a data-v-4d512e2a>+</span>wide<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>,</span> y<span class="token operator" data-v-4d512e2a data-v-4d512e2a>+</span>length<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>)</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>,</span> <span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>(</span>x<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>,</span> y<span class="token operator" data-v-4d512e2a data-v-4d512e2a>+</span>length<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>)</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>]</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>)</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>)</span>

grid <span class="token operator" data-v-4d512e2a data-v-4d512e2a>=</span> gpd<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>.</span>GeoDataFrame<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>(</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>{</span><span class="token string" data-v-4d512e2a data-v-4d512e2a>'geometry'</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>:</span>polygons<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>,</span> <span class="token string" data-v-4d512e2a data-v-4d512e2a>'cell_id'</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>:</span> <span class="token builtin" data-v-4d512e2a data-v-4d512e2a>list</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>(</span><span class="token builtin" data-v-4d512e2a data-v-4d512e2a>range</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>(</span><span class="token builtin" data-v-4d512e2a data-v-4d512e2a>len</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>(</span>polygons<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>)</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>)</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>)</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>}</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>)</span>
grid<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>.</span>crs <span class="token operator" data-v-4d512e2a data-v-4d512e2a>=</span> <span class="token string" data-v-4d512e2a data-v-4d512e2a>'EPSG:4326'</span>
</code></pre></div>
<p data-v-4d512e2a data-v-4d512e2a>Then we will merge the grid cells with our trees, count the number of trees within each cell and visualize the results:</p>
<div class="nuxt-content-highlight" data-v-4d512e2a data-v-4d512e2a><pre class="line-numbers language-python" data-v-4d512e2a data-v-4d512e2a><code data-v-4d512e2a data-v-4d512e2a><span class="token comment" data-v-4d512e2a data-v-4d512e2a># merge the two datasets</span>
grid_trees <span class="token operator" data-v-4d512e2a data-v-4d512e2a>=</span> gpd<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>.</span>sjoin<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>(</span>grid<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>,</span> manhattan_trees<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>)</span>

<span class="token comment" data-v-4d512e2a data-v-4d512e2a># count the number of trees in each cell</span>
grid_tree_count <span class="token operator" data-v-4d512e2a data-v-4d512e2a>=</span> grid_trees<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>.</span>groupby<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>(</span><span class="token string" data-v-4d512e2a data-v-4d512e2a>'cell_id'</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>)</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>[</span><span class="token string" data-v-4d512e2a data-v-4d512e2a>'tree_id'</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>]</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>.</span>count<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>(</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>)</span>

<span class="token comment" data-v-4d512e2a data-v-4d512e2a># rename the column for convenience</span>
grid_tree_count<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>.</span>rename<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>(</span><span class="token string" data-v-4d512e2a data-v-4d512e2a>'tree_count'</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>,</span> inplace<span class="token operator" data-v-4d512e2a data-v-4d512e2a>=</span><span class="token boolean" data-v-4d512e2a data-v-4d512e2a>True</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>)</span>

<span class="token comment" data-v-4d512e2a data-v-4d512e2a># merge the two tree counts with the grid GeoDataFrame and plot</span>
grid<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>.</span>merge<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>(</span>grid_tree_count<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>,</span> on<span class="token operator" data-v-4d512e2a data-v-4d512e2a>=</span><span class="token string" data-v-4d512e2a data-v-4d512e2a>'cell_id'</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>)</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>.</span>plot<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>(</span>
  column<span class="token operator" data-v-4d512e2a data-v-4d512e2a>=</span><span class="token string" data-v-4d512e2a data-v-4d512e2a>'tree_count'</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>,</span> figsize<span class="token operator" data-v-4d512e2a data-v-4d512e2a>=</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>(</span><span class="token number" data-v-4d512e2a data-v-4d512e2a>12</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>,</span><span class="token number" data-v-4d512e2a data-v-4d512e2a>14</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>)</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>,</span> edgecolor<span class="token operator" data-v-4d512e2a data-v-4d512e2a>=</span><span class="token string" data-v-4d512e2a data-v-4d512e2a>'white'</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>)</span>
cx<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>.</span>add_basemap<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>(</span>ax<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>,</span> source<span class="token operator" data-v-4d512e2a data-v-4d512e2a>=</span>cx<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>.</span>providers<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>.</span>Stamen<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>.</span>TonerLite<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>,</span> crs<span class="token operator" data-v-4d512e2a data-v-4d512e2a>=</span><span class="token string" data-v-4d512e2a data-v-4d512e2a>'EPSG:4326'</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>)</span>
ax<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>.</span>set_axis_off<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>(</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>)</span>
</code></pre></div>
<p data-v-4d512e2a data-v-4d512e2a></p><div class="img" data-v-34c0681c data-v-4d512e2a><img src="https://smorgasbord-dist.s3.us-east-1.amazonaws.com/img/grid_tree-count.968e6ca.png" alt="missing-image" data-v-34c0681c></div><p></p>
<p data-v-4d512e2a data-v-4d512e2a>Discretizing points into grids is a fast and efficient way of describing density across regions. But it suffers from the loss of information that comes with binning the data. Another approach is that of Kernel Density Estimation (KDE). KDE is a common tool in statistics and machine learning, often used to describe the continuous distribution of data using "kernels". In the context of our tree data, KDE visualizes the density of trees using contours to indicate higher concentrations, giving us a method for visualizing the density of points across the city without having to buckets the data into grids.</p>
<p data-v-4d512e2a data-v-4d512e2a>We will implement Kernel Density Estimation using <a href="https://seaborn.pydata.org/index.html" rel="nofollow noopener noreferrer" target="_blank" data-v-4d512e2a data-v-4d512e2a>Seaborn</a>, a Python library for data visualization. Seaborn has a <code data-v-4d512e2a data-v-4d512e2a>.kdeplot()</code> function that takes as input the <code data-v-4d512e2a data-v-4d512e2a>x</code> + <code data-v-4d512e2a data-v-4d512e2a>y</code> coordinates of our point data and a color map (specifying the underlying color of the visualization):</p>
<div class="nuxt-content-highlight" data-v-4d512e2a data-v-4d512e2a><pre class="line-numbers language-python" data-v-4d512e2a data-v-4d512e2a><code data-v-4d512e2a data-v-4d512e2a><span class="token comment" data-v-4d512e2a data-v-4d512e2a># create the base layer on which will go the KDE and mapping context</span>
_<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>,</span> ax <span class="token operator" data-v-4d512e2a data-v-4d512e2a>=</span> plt<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>.</span>subplots<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>(</span><span class="token number" data-v-4d512e2a data-v-4d512e2a>1</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>,</span> figsize<span class="token operator" data-v-4d512e2a data-v-4d512e2a>=</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>(</span><span class="token number" data-v-4d512e2a data-v-4d512e2a>12</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>,</span> <span class="token number" data-v-4d512e2a data-v-4d512e2a>14</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>)</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>)</span>

<span class="token comment" data-v-4d512e2a data-v-4d512e2a># use Seaborn to plot KDE</span>
sns<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>.</span>kdeplot<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>(</span>
    manhattan_trees<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>[</span><span class="token string" data-v-4d512e2a data-v-4d512e2a>'longitude'</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>]</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>,</span>
    manhattan_trees<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>[</span><span class="token string" data-v-4d512e2a data-v-4d512e2a>'latitude'</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>]</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>,</span>
    cmap<span class="token operator" data-v-4d512e2a data-v-4d512e2a>=</span><span class="token string" data-v-4d512e2a data-v-4d512e2a>'viridis'</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>,</span>
    shade<span class="token operator" data-v-4d512e2a data-v-4d512e2a>=</span><span class="token boolean" data-v-4d512e2a data-v-4d512e2a>True</span>
<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>)</span>

<span class="token comment" data-v-4d512e2a data-v-4d512e2a># add context</span>
cx<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>.</span>add_basemap<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>(</span>ax<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>,</span> source<span class="token operator" data-v-4d512e2a data-v-4d512e2a>=</span>cx<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>.</span>providers<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>.</span>Stamen<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>.</span>TonerLite<span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>,</span> crs<span class="token operator" data-v-4d512e2a data-v-4d512e2a>=</span><span class="token string" data-v-4d512e2a data-v-4d512e2a>'EPSG:4326'</span><span class="token punctuation" data-v-4d512e2a data-v-4d512e2a>)</span>
</code></pre></div>
<p data-v-4d512e2a data-v-4d512e2a></p><div class="img" data-v-34c0681c data-v-4d512e2a><img src="https://smorgasbord-dist.s3.us-east-1.amazonaws.com/img/kde_tree-count.275301d.png" alt="missing-image" data-v-34c0681c></div><p></p>
<p data-v-4d512e2a data-v-4d512e2a>Compared to the use of grids and binning our data, KDE provides a smoother gradient (via contours) to indicate higher and lower concentrations of trees â€“ here the yellow areas have higher concentration.</p>
<hr data-v-4d512e2a data-v-4d512e2a>
<br data-v-4d512e2a data-v-4d512e2a>
<br data-v-4d512e2a data-v-4d512e2a>
<h2 id="challenge" data-v-4d512e2a data-v-4d512e2a><a href="#challenge" aria-hidden="true" tabindex="-1" data-v-4d512e2a data-v-4d512e2a><span class="icon icon-link" data-v-4d512e2a data-v-4d512e2a></span></a>Challenge</h2>
<p data-v-4d512e2a data-v-4d512e2a>Download the NYC points of interest dataset and explore their density throughout the city.</p></div></div> <div class="postfooter" data-v-4d512e2a></div></div></div><div class="copyright" data-v-2354a23f data-v-529cb57d><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" data-v-2354a23f><img alt="Creative Commons License" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png" style="border-width:0" data-v-2354a23f></a><br data-v-2354a23f>This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" data-v-2354a23f>Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.
</div></div> <div id="graph-column" data-v-529cb57d><div data-fetch-key="data-v-9c60a860:0" class="graph" data-v-9c60a860 data-v-529cb57d>
  [] 
</div></div></div></div></div><script defer src="https://smorgasbord-dist.s3.us-east-1.amazonaws.com/static/1652167150/modules/10-spatial-python/103-spatial-analysis-point-pattern/state.js"></script><script src="https://smorgasbord-dist.s3.us-east-1.amazonaws.com/1cd9192.js" defer></script><script src="https://smorgasbord-dist.s3.us-east-1.amazonaws.com/9e6e7d4.js" defer></script><script src="https://smorgasbord-dist.s3.us-east-1.amazonaws.com/5c176c2.js" defer></script><script src="https://smorgasbord-dist.s3.us-east-1.amazonaws.com/1033e76.js" defer></script><script src="https://smorgasbord-dist.s3.us-east-1.amazonaws.com/d87c597.js" defer></script><script src="https://smorgasbord-dist.s3.us-east-1.amazonaws.com/b6f68fa.js" defer></script>
  </body>
</html>
