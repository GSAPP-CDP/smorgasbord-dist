<!doctype html>
<html data-n-head-ssr lang="en" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>GSAPP SMORGASBORD</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="description" name="description" content=""><meta data-n-head="ssr" name="format-detection" content="telephone=no"><base href="/smorgasbord/"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link data-n-head="ssr" data-hid="gf-prefetch" rel="dns-prefetch" href="https://fonts.gstatic.com/"><link data-n-head="ssr" data-hid="gf-preconnect" rel="preconnect" href="https://fonts.gstatic.com/" crossorigin=""><link data-n-head="ssr" data-hid="gf-preload" rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&family=IBM Plex Sans:wght@300;400;700"><script data-n-head="ssr" data-hid="gf-script">!function(){var e=document.createElement("link");e.rel="stylesheet",e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&family=IBM Plex Sans:wght@300;400;700",document.querySelector("head").appendChild(e)}()</script><noscript data-n-head="ssr" data-hid="gf-noscript"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&family=IBM Plex Sans:wght@300;400;700"></noscript><link rel="preload" href="/smorgasbord/_nuxt/b24fb8c.js" as="script"><link rel="preload" href="/smorgasbord/_nuxt/2d8db30.js" as="script"><link rel="preload" href="/smorgasbord/_nuxt/c7b5db0.js" as="script"><link rel="preload" href="/smorgasbord/_nuxt/8d5d7f8.js" as="script"><link rel="preload" href="/smorgasbord/_nuxt/0635aab.js" as="script"><link rel="preload" href="/smorgasbord/_nuxt/c651e03.js" as="script"><style data-vue-ssr-id="1dfbd988:0 517a8dd7:0 fa7ff0ca:0 56b15182:0 34da3673:0 fd42f946:0 f243d9c8:0 411a0fe8:0 85231c86:0 4c17ae71:0 77b1ef0b:0 3b3e78a8:0">body{margin:0;padding:0}code[class*=language-],pre[class*=language-]{color:#000;background:0 0;text-shadow:0 1px #fff;font-family:Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.nuxt-progress{position:fixed;top:0;left:0;right:0;height:2px;width:0;opacity:1;transition:width .1s,opacity .4s;background-color:#000;z-index:999999}.nuxt-progress.nuxt-progress-notransition{transition:none}.nuxt-progress-failed{background-color:red}#default{display:flex;flex-direction:column;width:100%;height:100%;background-color:#f2ede7;font-family:"IBM Plex Sans",Helvetica,sans-serif}#nav-column{width:90vw;max-width:900px}.introblurb{margin-bottom:20px;max-width:600px}#layout-module{display:flex;width:100%;height:100vh;background-color:#f2ede7;font-family:"IBM Plex Sans",Helvetica,sans-serif}a,a:visited{color:#555}#nav-column{overflow-y:auto;flex-basis:350px;flex-grow:0;flex-shrink:0;padding:20px 30px}#logo{height:100px}#content-column{overflow-y:auto;width:100%}#graph-column{display:none}a[data-v-61c030eb]{text-decoration:none}.smorgasbord[data-v-61c030eb]{font-weight:700;font-size:1.5em}.links[data-v-31cab561]{border-bottom:2px dotted grey;margin-bottom:20px;padding:0 5px 20px}.nav[data-v-31cab561]{color:#4a4a4a;font-weight:700}a[data-v-31cab561]{display:inline-block}.title[data-v-31cab561]{font-size:2em;font-weight:700}.course[data-v-88b1a66c]{border-left:2px solid grey;padding-left:8px}.coursetitle[data-v-88b1a66c]{font-size:1.5em;margin-bottom:10px}.moduleindex[data-v-88b1a66c]{color:555;font-family:Lato;color:#000;font-size:.85em}.sequence[data-v-88b1a66c]{line-height:1.5em;margin-bottom:20px}.active>[data-v-c650d19c],.active[data-v-c650d19c],.nuxt-link-active[data-v-c650d19c]{color:#4cbf8f!important;font-weight:700}.moduleindex[data-v-c650d19c]{color:555;font-family:Lato;color:#000;line-height:1.5em}.sequence[data-v-c650d19c]{font-weight:400}.hover.sequence[data-v-c650d19c]{color:#0096ea!important}a[data-v-c650d19c]{text-decoration:none}a[data-v-c650d19c]:hover{color:#0096ea!important;font-weight:700}ul[data-v-c650d19c]{padding:0 0 0 10px;list-style-type:none}li[data-v-c650d19c]{color:grey}.bullet[data-v-c650d19c]:before{content:"â€¢"}.sequencetitle[data-v-c650d19c]{font-weight:700;font-size:1.15em}.indexview.moduleindex[data-v-c650d19c]{font-size:1.25em}.indexview .sequence[data-v-c650d19c]{display:flex;flex-direction:row;border-top:2px solid #555;padding-top:5px;margin-bottom:5px}.indexview .sequence.hover[data-v-c650d19c]{border-top:2px solid #0096ea}.indexview .sequencetitle[data-v-c650d19c]{width:50%;padding-right:20px}.indexview .sequencemodules[data-v-c650d19c]{width:50%;font-style:italics}.indexview .ul[data-v-c650d19c]{padding-left:0}div[data-v-184c4dbe]{font-family:Lato;color:#000}.post[data-v-71fe5848]{padding:110px 30px 100px;max-width:800px;font-size:1em;font-weight:regular;color:#444;word-wrap:break-word}[data-v-71fe5848] li,[data-v-71fe5848] p{line-height:1.5em}blockquote[data-v-71fe5848]{font-size:.9em;line-height:1.8em;color:#666}.postheader[data-v-71fe5848]{padding-bottom:10px;border-bottom:1px solid #4cbf8f;margin-bottom:10px}.posttitle[data-v-71fe5848]{font-weight:700;font-size:3em;color:#4cbf8f;margin-bottom:15px;word-break:break-word}.instruction[data-v-71fe5848]{background-color:#ccc;border-radius:10px;padding:20px 10px}.instruction p[data-v-71fe5848]:last-child{margin-bottom:0}[data-v-71fe5848] img{width:100%;height:auto}[data-v-71fe5848] img[src$="#img-left"]{max-width:50%;max-height:400px;padding:10px 15px 10px 0;float:left;clear:both}[data-v-71fe5848] img[src$="#img-right"]{float:right;max-width:50%;max-height:400px;padding:10px 0 10px 15px;clear:both}[data-v-71fe5848] h1,[data-v-71fe5848] h2,[data-v-71fe5848] h3,[data-v-71fe5848] h4{clear:both}[data-v-71fe5848] h3,[data-v-71fe5848] h4{padding-top:2em}div.img+em[data-v-71fe5848],img+em[data-v-71fe5848]{color:#888;margin-bottom:10px;display:inline-block}.val[data-v-71fe5848]{font-weight:700}[data-v-71fe5848] code{background-color:#f4f4f4;padding:3px 6px;border-radius:5px}[data-v-71fe5848] blockquote{border-left:2px solid #666;padding-left:20px;margin-left:10px;color:#666}.copyright[data-v-2354a23f]{color:#4a4a4a;font-size:.85em;padding:30px}a[data-v-2354a23f]:hover{color:#fd1789;border-bottom:1px dotted grey}.graph[data-v-9c60a860]{overflow:auto;height:100%}</style><link rel="preload" href="/smorgasbord/_nuxt/static/1652321291/modules/10-spatial-python/105-spatial-analysis-clustering/state.js" as="script"><link rel="preload" href="/smorgasbord/_nuxt/static/1652321291/modules/10-spatial-python/105-spatial-analysis-clustering/payload.js" as="script"><link rel="preload" href="/smorgasbord/_nuxt/static/1652321291/manifest.js" as="script">
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div id="layout-module"><div id="nav-column"><div id="logo"><div class="logo" style="width:220px" data-v-61c030eb><a href="/smorgasbord/" class="nuxt-link-active" data-v-61c030eb><img src="/smorgasbord/_nuxt/img/logo_full.f44c15c.svg" data-v-61c030eb></a></div></div> <div id="nav"><div class="nav" data-v-31cab561><div class="links" data-v-31cab561><div class="navlink" data-v-31cab561><a href="/smorgasbord/welcome" data-v-31cab561>Welcome</a></div> <div class="navlink" data-v-31cab561><a href="/smorgasbord/how-to-use-this-site" data-v-31cab561>How To Use This Site</a></div></div> <div class="moduleindex" data-v-88b1a66c data-v-31cab561><div class="coursetitle" data-v-88b1a66c>Mapping and Data</div> <div class="course" data-v-88b1a66c><div class="sequence" data-v-c650d19c data-v-88b1a66c><div class="sequencetitle" data-v-c650d19c><a href="/smorgasbord/modules/14-geospatial-concepts/index" data-v-c650d19c>Introduction to Geographic Information Systems Concepts</a></div> <ol class="sequencemodules" data-v-c650d19c><!----><li data-v-c650d19c><a href="/smorgasbord/modules/14-geospatial-concepts/141-what-is-gis" data-v-c650d19c> What is GIS?</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/14-geospatial-concepts/142-spatial-data" data-v-c650d19c> Spatial Data</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/14-geospatial-concepts/143-coordinates-projections" data-v-c650d19c> Coordinate Reference Systems & Projections</a></li></ol></div> <div class="sequence" data-v-c650d19c data-v-88b1a66c><div class="sequencetitle" data-v-c650d19c><a href="/smorgasbord/modules/15-intro-qgis/index" data-v-c650d19c>Introduction to GIS with QGIS</a></div> <ol class="sequencemodules" data-v-c650d19c><!----><li data-v-c650d19c><a href="/smorgasbord/modules/15-intro-qgis/151-mapping-where" data-v-c650d19c> Mapping Where</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/15-intro-qgis/152-print-layout" data-v-c650d19c> Print Layout</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/15-intro-qgis/153-archives" data-v-c650d19c> Making data from Archives</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/15-intro-qgis/154-observations" data-v-c650d19c> Making Data from Field Observations</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/15-intro-qgis/155-satellites" data-v-c650d19c> Making Data from Satellites</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/15-intro-qgis/156-aerial-imagery" data-v-c650d19c> Making Data from</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/15-intro-qgis/157-atlas" data-v-c650d19c> A Subjective Atlas</a></li></ol></div></div> <div class="coursetitle" data-v-88b1a66c>Computational Drawing</div> <div class="course" data-v-88b1a66c><div class="sequence" data-v-c650d19c data-v-88b1a66c><div class="sequencetitle" data-v-c650d19c><a href="/smorgasbord/modules/12-rhino-intro/index" data-v-c650d19c>Introduction to Rhino</a></div> <ol class="sequencemodules" data-v-c650d19c><!----><li data-v-c650d19c><a href="/smorgasbord/modules/12-rhino-intro/12-1_rhino-interface" data-v-c650d19c> The Rhino Interface</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/12-rhino-intro/12-2_rhino-2d" data-v-c650d19c> Rhino 2D</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/12-rhino-intro/12-3_rhino-3d" data-v-c650d19c> Rhino 3D</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/12-rhino-intro/12-4_rhino-nurbs" data-v-c650d19c> Modeling with NURBS</a></li></ol></div> <div class="sequence" data-v-c650d19c data-v-88b1a66c><div class="sequencetitle" data-v-c650d19c><a href="/smorgasbord/modules/13-arch-drawing/index" data-v-c650d19c>Introduction to Architectural Drawing</a></div> <ol class="sequencemodules" data-v-c650d19c><!----><li data-v-c650d19c><a href="/smorgasbord/modules/13-arch-drawing/13-1_orthographic-drawing" data-v-c650d19c> Orthographic Drawing: Plans & Sections</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/13-arch-drawing/13-2_projection" data-v-c650d19c> Projection</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/13-arch-drawing/13-3_rendering" data-v-c650d19c> Lighting, Materials & Rendering</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/13-arch-drawing/13-4_compositing" data-v-c650d19c> Compositing</a></li></ol></div></div> <div class="coursetitle" data-v-88b1a66c>Programming for Design Practices: A - Grasshopper</div> <div class="course" data-v-88b1a66c><div class="sequence" data-v-c650d19c data-v-88b1a66c><div class="sequencetitle" data-v-c650d19c><a href="/smorgasbord/modules/4-grasshopper-intro/index" data-v-c650d19c>Intro To Grasshopper</a></div> <ol class="sequencemodules" data-v-c650d19c><!----><li data-v-c650d19c><a href="/smorgasbord/modules/4-grasshopper-intro/41-getting-started-with-grasshopper" data-v-c650d19c> Getting started with Grasshopper</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/4-grasshopper-intro/42-exercise-hello-grasshopper" data-v-c650d19c> Exercise - Hello Grasshopper!</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/4-grasshopper-intro/43-working-in-grasshopper" data-v-c650d19c> Working in Grasshopper</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/4-grasshopper-intro/44-exercise-parametric-tower-part-1" data-v-c650d19c> Exercise - Parametric tower (part 1)</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/4-grasshopper-intro/45-working-with-data" data-v-c650d19c> Working with data</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/4-grasshopper-intro/46-exercise-parametric-tower-part-2" data-v-c650d19c> Exercise - Parametric tower (part 2)</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/4-grasshopper-intro/47-documentation-best-practices" data-v-c650d19c> Grasshopper Documentation Best Practices</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/4-grasshopper-intro/48-Deriving-Spatial-Data" data-v-c650d19c> Deriving Spatial Data</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/4-grasshopper-intro/49-Procedural-Rules" data-v-c650d19c> Parametric to Procedural</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/4-grasshopper-intro/410-Generating-Exploring-Spatial-Data" data-v-c650d19c> Generating and Exploring Spatial Data</a></li></ol></div> <div class="sequence" data-v-c650d19c data-v-88b1a66c><div class="sequencetitle" data-v-c650d19c><a href="/smorgasbord/modules/5-computational-design-modeling-in-grasshopper/index" data-v-c650d19c>Computational Design Modeling In Grasshopper</a></div> <ol class="sequencemodules" data-v-c650d19c><!----><li data-v-c650d19c><a href="/smorgasbord/modules/5-computational-design-modeling-in-grasshopper/5-1-Comp-Design-Modeling" data-v-c650d19c> What is a Computational Design Model?</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/5-computational-design-modeling-in-grasshopper/5-2-Subdivide-Geometry" data-v-c650d19c> Subdividing Geometry for Analysis</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/5-computational-design-modeling-in-grasshopper/5-3-Analysis-Tools" data-v-c650d19c> Building Custom Analysis Tools</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/5-computational-design-modeling-in-grasshopper/5-4-Street-Grid" data-v-c650d19c> Parametric Streets, Blocks, and Parcels</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/5-computational-design-modeling-in-grasshopper/5-5_Buildings-Density" data-v-c650d19c> Procedural Density and Building Types</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/5-computational-design-modeling-in-grasshopper/5-6_Troubleshooting" data-v-c650d19c> Putting Everything Together</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/5-computational-design-modeling-in-grasshopper/5-7_Design-Space" data-v-c650d19c> Creating a Design Space and Exploring results</a></li></ol></div></div> <div class="coursetitle" data-v-88b1a66c>Programming for Design Practices: B - Python</div> <div class="course" data-v-88b1a66c><div class="sequence" data-v-c650d19c data-v-88b1a66c><div class="sequencetitle" data-v-c650d19c><a href="/smorgasbord/modules/6-intro-to-python/index" data-v-c650d19c>Intro to Python</a></div> <ol class="sequencemodules" data-v-c650d19c><!----><li data-v-c650d19c><a href="/smorgasbord/modules/6-intro-to-python/61-getting-started-with-Python" data-v-c650d19c> Getting started with Python</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/6-intro-to-python/62-using-python-in-grasshopper" data-v-c650d19c> Using Python in Grasshopper</a></li></ol></div> <div class="sequence" data-v-c650d19c data-v-88b1a66c><div class="sequencetitle" data-v-c650d19c><a href="/smorgasbord/modules/7-fundamentals-of-python/index" data-v-c650d19c>Fundamentals of Python</a></div> <ol class="sequencemodules" data-v-c650d19c><!----><li data-v-c650d19c><a href="/smorgasbord/modules/7-fundamentals-of-python/71-variables-lists-and-dictionaries" data-v-c650d19c> Variables, Lists, and Dictionaries</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/7-fundamentals-of-python/72-conditionals-and-loops" data-v-c650d19c> Conditionals and Loops</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/7-fundamentals-of-python/73-functions-and-classes" data-v-c650d19c> Functions and Classes</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/7-fundamentals-of-python/74-python-libraries" data-v-c650d19c> Python Libraries</a></li></ol></div> <div class="sequence" data-v-c650d19c data-v-88b1a66c><div class="sequencetitle" data-v-c650d19c><a href="/smorgasbord/modules/8-intro-to-python-in-rhino/index" data-v-c650d19c>Intro to Python Scripting in Rhino</a></div> <ol class="sequencemodules" data-v-c650d19c><!----><li data-v-c650d19c><a href="/smorgasbord/modules/8-intro-to-python-in-rhino/81-accessing-the-rhino-apis-in-python" data-v-c650d19c> Accessing with the Rhino Libraries in Python</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/8-intro-to-python-in-rhino/82-working-with-geometry-in-python" data-v-c650d19c> Working with geometry in Python</a></li></ol></div> <div class="sequence" data-v-c650d19c data-v-88b1a66c><div class="sequencetitle" data-v-c650d19c><a href="/smorgasbord/modules/10-spatial-python/index" data-v-c650d19c>Working with Spatial Data in Python</a></div> <ol class="sequencemodules" data-v-c650d19c><!----><li data-v-c650d19c><a href="/smorgasbord/modules/10-spatial-python/101-data-manipulation" data-v-c650d19c> Data Manipulation</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/10-spatial-python/102-geospatial-data" data-v-c650d19c> Geospatial Data</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/10-spatial-python/103-spatial-analysis-point-pattern" data-v-c650d19c> Spatial Analysis â€“ Point Patterns</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/10-spatial-python/104-spatial-analysis-correlation" data-v-c650d19c> Spatial Analysis â€“ Correlation</a></li><li class="active" data-v-c650d19c><a href="/smorgasbord/modules/10-spatial-python/105-spatial-analysis-clustering" aria-current="page" class="nuxt-link-exact-active nuxt-link-active" data-v-c650d19c> Spatial Analysis â€“ Clustering</a></li></ol></div></div> <div class="coursetitle" data-v-88b1a66c>Programming for Design Practices: C - Web and Interactivity</div> <div class="course" data-v-88b1a66c><div class="sequence" data-v-c650d19c data-v-88b1a66c><div class="sequencetitle" data-v-c650d19c><a href="/smorgasbord/modules/11-interactive-web/index" data-v-c650d19c>Interactive Web</a></div> <ol class="sequencemodules" data-v-c650d19c><!----><li data-v-c650d19c><a href="/smorgasbord/modules/11-interactive-web/110-javascript-in-browser" data-v-c650d19c> Javascript in the Browser I - Weather UI Design</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/11-interactive-web/111-data-and-apis" data-v-c650d19c> Data and APIs</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/11-interactive-web/112-javascript-in-the-browser" data-v-c650d19c> JavaScript in the Browser II - Events and UIs</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/11-interactive-web/113-javascript-in-the-browser" data-v-c650d19c> JavaScript in the Browser III - Events and UIs</a></li></ol></div> <div class="sequence" data-v-c650d19c data-v-88b1a66c><div class="sequencetitle" data-v-c650d19c><a href="/smorgasbord/modules/16-ambient-computing-network-architecture/index" data-v-c650d19c>Ambient Computing - Network Architecture</a></div> <ol class="sequencemodules" data-v-c650d19c><!----><li data-v-c650d19c><a href="/smorgasbord/modules/16-ambient-computing-network-architecture/161-dynamic-environments" data-v-c650d19c> Ambient Environments</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/16-ambient-computing-network-architecture/162-network-architecture" data-v-c650d19c> Network Architecture</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/16-ambient-computing-network-architecture/163-low-and-high-programming" data-v-c650d19c> Low and High Programming</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/16-ambient-computing-network-architecture/164-Intro-to-Processing-Lighting" data-v-c650d19c> Intro to Processing</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/16-ambient-computing-network-architecture/165-Webhooks-Connecting-IFTTT-and-Processing" data-v-c650d19c> Webhooks - Connecting IFTTT and Processing</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/16-ambient-computing-network-architecture/166-sounds-speech-and-macros" data-v-c650d19c> Sounds, Speech, and Macros</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/16-ambient-computing-network-architecture/167-Markers-and-Tracking" data-v-c650d19c> Markers and Tracking</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/16-ambient-computing-network-architecture/168-Computer-Vision" data-v-c650d19c> Computer Vision</a></li></ol></div> <!----> <div class="sequence" data-v-c650d19c data-v-88b1a66c><div class="sequencetitle" data-v-c650d19c><a href="/smorgasbord/modules/18-behavioral-modeling-intro/index" data-v-c650d19c>Behavioral Modeling - Intro</a></div> <ol class="sequencemodules" data-v-c650d19c><!----><li data-v-c650d19c><a href="/smorgasbord/modules/18-behavioral-modeling-intro/181-Unity-and-Agent-Based-Models" data-v-c650d19c> Agent Based Modeling</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/18-behavioral-modeling-intro/182-Intro-To-Unity" data-v-c650d19c> Intro to Unity</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/18-behavioral-modeling-intro/183-Agent-Based-Populations-and-Behavior-Bricks" data-v-c650d19c> Agent Based Modeling and Behavior Bricks</a></li><li data-v-c650d19c><a href="/smorgasbord/modules/18-behavioral-modeling-intro/184-Mapbox-SDK-and-Routing" data-v-c650d19c> Mapbox SDK</a></li></ol></div></div></div> <div class="navlink" data-v-31cab561><a href="/smorgasbord/credits" data-v-31cab561>Credits</a></div></div></div></div> <div id="content-column"><div data-fetch-key="data-v-184c4dbe:0" data-v-184c4dbe><div data-fetch-key="data-v-71fe5848:0" class="post" data-v-71fe5848 data-v-184c4dbe><div class="postheader" data-v-71fe5848><div class="posttitle" data-v-71fe5848><span class="val" data-v-71fe5848>Spatial Analysis â€“ Clustering</span></div> <div class="postauthor" data-v-71fe5848>by <span class="val" data-v-71fe5848>Carlo Bailey</span></div> <!----></div> <div class="postbody" data-v-71fe5848><div class="nuxt-content" data-v-71fe5848 data-v-71fe5848><h1 id="spatial-analysis--clustering" data-v-71fe5848 data-v-71fe5848><a href="#spatial-analysis--clustering" aria-hidden="true" tabindex="-1" data-v-71fe5848 data-v-71fe5848><span class="icon icon-link" data-v-71fe5848 data-v-71fe5848></span></a>Spatial Analysis â€“ Clustering</h1>
<p data-v-71fe5848 data-v-71fe5848></p><div class="img" data-v-a1883e6c data-v-71fe5848><img src="/smorgasbord/_nuxt/img/mark_lombardi.9a7c4e1.jpg" alt="missing-image" data-v-a1883e6c></div>
<em data-v-71fe5848 data-v-71fe5848>Gerry Bull, Space Research Corporation and Armscor of Pretoria, South Africa, c. 1972â€“80 1999</em><p></p>
<h2 id="module-summary" data-v-71fe5848 data-v-71fe5848><a href="#module-summary" aria-hidden="true" tabindex="-1" data-v-71fe5848 data-v-71fe5848><span class="icon icon-link" data-v-71fe5848 data-v-71fe5848></span></a>Module Summary</h2>
<p data-v-71fe5848 data-v-71fe5848>In this module we introduce clustering as a method for spatial analysis. Clustering involves grouping sets of objects such that members of the same group (called a cluster) are more similar to each other than those in other clusters. Clustering falls within a branch of unsupervised statistical learning, where algorithms themselves learn the structure of data, rather than being taught it (supervised learning). It's core conceptual underpinning is that you can use an algorithm to summarize characteristics about a group of objects, across many (often hundreds) of variables. But unlike many other statistical methods, there is often no correct answer as to what makes a good or bad cluster, or whether an object belongs in a certain group or not. As such, clustering can be misused when applied to socio-economic settings without rigorous critical thinking. Clustering is used across a range of applications from grouping emails by their textual content, to grouping <a href="https://pudding.cool/2019/11/big-hair/" rel="nofollow noopener noreferrer" target="_blank" data-v-71fe5848 data-v-71fe5848>hair styles</a> across decades, to even grouping <a href="https://doc.arcgis.com/en/esri-demographics/data/tapestry-segmentation.htm" rel="nofollow noopener noreferrer" target="_blank" data-v-71fe5848 data-v-71fe5848>geographies</a> based on the attributes of residents or buildings within them. In this module we will use clustering to group geographies, based on the attributes of buildings found within them. We will work with the NYC Planning Department's <a href="https://www1.nyc.gov/site/planning/data-maps/open-data/dwn-pluto-mappluto.page" rel="nofollow noopener noreferrer" target="_blank" data-v-71fe5848 data-v-71fe5848>building data</a>.</p>
<hr data-v-71fe5848 data-v-71fe5848>
<br data-v-71fe5848 data-v-71fe5848>
<br data-v-71fe5848 data-v-71fe5848>
<p data-v-71fe5848 data-v-71fe5848>For this module we will be using the <a href="https://pandas.pydata.org/" rel="nofollow noopener noreferrer" target="_blank" data-v-71fe5848 data-v-71fe5848>Pandas</a>, <a href="https://geopandas.org/en/stable/" rel="nofollow noopener noreferrer" target="_blank" data-v-71fe5848 data-v-71fe5848>GeoPandas</a> and <a href="https://scikit-learn.org/stable/" rel="nofollow noopener noreferrer" target="_blank" data-v-71fe5848 data-v-71fe5848>Scikit-Learn</a> Python libraries. Ensure to <code data-v-71fe5848 data-v-71fe5848>pip install</code> them on your machine, if you don't already have them, and import like so:</p>
<div class="nuxt-content-highlight" data-v-71fe5848 data-v-71fe5848><pre class="language-python line-numbers" data-v-71fe5848 data-v-71fe5848><code data-v-71fe5848 data-v-71fe5848><span class="token keyword" data-v-71fe5848 data-v-71fe5848>import</span> pandas <span class="token keyword" data-v-71fe5848 data-v-71fe5848>as</span> pd
<span class="token keyword" data-v-71fe5848 data-v-71fe5848>import</span> geopandas <span class="token keyword" data-v-71fe5848 data-v-71fe5848>as</span> gpd
<span class="token keyword" data-v-71fe5848 data-v-71fe5848>from</span> sklearn<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span>cluster <span class="token keyword" data-v-71fe5848 data-v-71fe5848>import</span> KMeans
<span class="token keyword" data-v-71fe5848 data-v-71fe5848>import</span> matplotlib<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span>pyplot <span class="token keyword" data-v-71fe5848 data-v-71fe5848>as</span> plt
</code></pre></div>
<hr data-v-71fe5848 data-v-71fe5848>
<br data-v-71fe5848 data-v-71fe5848>
<br data-v-71fe5848 data-v-71fe5848>
<h3 id="clustering" data-v-71fe5848 data-v-71fe5848><a href="#clustering" aria-hidden="true" tabindex="-1" data-v-71fe5848 data-v-71fe5848><span class="icon icon-link" data-v-71fe5848 data-v-71fe5848></span></a>Clustering</h3>
<p data-v-71fe5848 data-v-71fe5848>In the previous module on spatial correlation we began by discussing Tobler's First Law of Geography: "everything is related to everything else, but near things are more related than distant things." Similarly, clustering algorithms look at the distances between objects to determine whether something belongs to a group. <a href="https://scikit-learn.org/stable/modules/clustering.html#k-means" rel="nofollow noopener noreferrer" target="_blank" data-v-71fe5848 data-v-71fe5848>K-means</a> clustering, by far the most widely used clustering algorithm, and the algorithm we will use for this demonstration, takes any number of objects (think point in high dimensional space) and groups points into clouds, where the centroid of each cloud is used to determine groups, such that the distance between every point in a group and the centroid is minimized.</p>
<p data-v-71fe5848 data-v-71fe5848>The algorithm is iterative and has three main steps: 1 â€“ choose the location of centroids for K groups (you have to tell the algorithm before hand how many clusters to create, this number is called K.) and then assign each object (or point) to the cluster of the nearest centroid. 2 â€“ The algorithm then finds the new average (or centroid) of the groups assigned in the previous step. 3 â€“ It then updates the group assignments based on the (new) location of the centroids. It does these steps until the centroids of each group does not move between iterations (in other words until the groupings are optimized). The below image shows what the K-means process would look like in 3-dimensions, when trying to group 3 clusters. However, often times we cannot visually represent the clustering process as it is done across much more than 3-dimensions.</p>
<p data-v-71fe5848 data-v-71fe5848></p><div class="img" data-v-a1883e6c data-v-71fe5848><img src="/smorgasbord/_nuxt/img/kmeans-demo.6a64c2d.png" alt="missing-image" data-v-a1883e6c></div><p></p>
<p data-v-71fe5848 data-v-71fe5848>Although an intuitive understanding of the algorithm is enough, formally, the process of minimizing the distance between points and cluster centroids can be written mathematically as such:</p>
<p data-v-71fe5848 data-v-71fe5848>
        <span class="math" data-v-71fe5848 data-v-71fe5848>Î£</span>
        min<sub data-v-71fe5848 data-v-71fe5848>Î¼<sub data-v-71fe5848 data-v-71fe5848>j</sub>âˆˆK</sub> (||x<sub data-v-71fe5848 data-v-71fe5848>i</sub> - Î¼<sub data-v-71fe5848 data-v-71fe5848>j</sub>||<sup data-v-71fe5848 data-v-71fe5848>2</sup>)
</p>
<p data-v-71fe5848 data-v-71fe5848>Where we minimize the squared absolute difference between points x<sub data-v-71fe5848 data-v-71fe5848>i</sub> for <em data-v-71fe5848 data-v-71fe5848>n</em> number of points and centroids Î¼<sub data-v-71fe5848 data-v-71fe5848>j</sub> in <em data-v-71fe5848 data-v-71fe5848>K</em> clusters.</p>
<p data-v-71fe5848 data-v-71fe5848>In this module we will cluster NYC zipcodes based on the attributes of the building's within them. To do this we will first classify building's into 11 types based on their height, count how many buildings of each type are in every zipcode, and then use the K-means algorithm to group zipcodes based on the distribution of building types.</p>
<p data-v-71fe5848 data-v-71fe5848>The first step will be to download and load the <a href="https://www2.census.gov/geo/tiger/TIGER2021/ZCTA520/tl_2021_us_zcta520.zip" rel="nofollow noopener noreferrer" target="_blank" data-v-71fe5848 data-v-71fe5848>zipcode</a> + <a href="https://www1.nyc.gov/site/planning/data-maps/open-data/dwn-pluto-mappluto.page" rel="nofollow noopener noreferrer" target="_blank" data-v-71fe5848 data-v-71fe5848>NYC building</a> data into GeoPandas and Pandas respectively:</p>
<div class="nuxt-content-highlight" data-v-71fe5848 data-v-71fe5848><pre class="language-python line-numbers" data-v-71fe5848 data-v-71fe5848><code data-v-71fe5848 data-v-71fe5848><span class="token comment" data-v-71fe5848 data-v-71fe5848># load zip codes</span>
path <span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span> <span class="token string" data-v-71fe5848 data-v-71fe5848>'data/tl_2021_us_zcta520/tl_2021_us_zcta520.shp'</span>
zips <span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span> gpd<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span>read_file<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>(</span>path<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>)</span>

<span class="token comment" data-v-71fe5848 data-v-71fe5848># update the zipcode CRS and rename the ID column (for readability)</span>
zips <span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span> zips<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span>to_crs<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>(</span><span class="token string" data-v-71fe5848 data-v-71fe5848>"EPSG:4326"</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>)</span>
zips<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span>rename<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>(</span>columns<span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>{</span><span class="token string" data-v-71fe5848 data-v-71fe5848>'ZCTA5CE20'</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>:</span> <span class="token string" data-v-71fe5848 data-v-71fe5848>'region_id'</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>}</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span> inplace<span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span><span class="token boolean" data-v-71fe5848 data-v-71fe5848>True</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>)</span>

<span class="token comment" data-v-71fe5848 data-v-71fe5848># load PLUTO buildings</span>
path <span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span> <span class="token string" data-v-71fe5848 data-v-71fe5848>'data/nyc_pluto_21v3_csv/pluto_21v3.csv'</span>
pluto <span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span> pd<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span>read_csv<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>(</span>path<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>)</span>
</code></pre></div>
<p data-v-71fe5848 data-v-71fe5848>We then need to convert the building data into a GeoDataFrame by turning the latitude and longitude columns into Shapely <code data-v-71fe5848 data-v-71fe5848>Point</code> objects. To do this we will make use of the <code data-v-71fe5848 data-v-71fe5848>lambda</code> function in Python. Lambda functions (sometimes called anonymous functions) are just like normal functions except they do not have a name or use the <code data-v-71fe5848 data-v-71fe5848>def</code> keyword). They are pretty useful for doing quick operations on large lists:</p>
<div class="nuxt-content-highlight" data-v-71fe5848 data-v-71fe5848><pre class="language-python line-numbers" data-v-71fe5848 data-v-71fe5848><code data-v-71fe5848 data-v-71fe5848><span class="token comment" data-v-71fe5848 data-v-71fe5848># create a function that takes a latitude + longitude and returns a Point</span>
create_point <span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span> <span class="token keyword" data-v-71fe5848 data-v-71fe5848>lambda</span> x<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>:</span> Point<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>(</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>[</span>x<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>[</span><span class="token string" data-v-71fe5848 data-v-71fe5848>'longitude'</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>]</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span> x<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>[</span><span class="token string" data-v-71fe5848 data-v-71fe5848>'latitude'</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>]</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>]</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>)</span>

pluto<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>[</span><span class="token string" data-v-71fe5848 data-v-71fe5848>'geom'</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>]</span> <span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span> pluto<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span><span class="token builtin" data-v-71fe5848 data-v-71fe5848>apply</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>(</span>create_point<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span> axis<span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span><span class="token number" data-v-71fe5848 data-v-71fe5848>1</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>)</span>

<span class="token comment" data-v-71fe5848 data-v-71fe5848># now we can create a GeoDataFrame using the new geom column</span>
pluto <span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span> gpd<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span>GeoDataFrame<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>(</span>pluto<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span> geometry<span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span><span class="token string" data-v-71fe5848 data-v-71fe5848>'geom'</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span> crs<span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span><span class="token string" data-v-71fe5848 data-v-71fe5848>'EPSG:4326'</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>)</span>
</code></pre></div>
<p data-v-71fe5848 data-v-71fe5848>Now we have the building Point objects and the zip codes loaded, we can use GeoPandas to do a spatial join between the two dataframes to combine them. The spatial join will join a single building (a row from the PLUTO dataset) to a zipcode, based on whether the building falls within said zip code:</p>
<div class="nuxt-content-highlight" data-v-71fe5848 data-v-71fe5848><pre class="language-python line-numbers" data-v-71fe5848 data-v-71fe5848><code data-v-71fe5848 data-v-71fe5848>pluto_zips <span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span> gpd<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span>sjoin<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>(</span>zips<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span> pluto<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>)</span>
<span class="token keyword" data-v-71fe5848 data-v-71fe5848>print</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>(</span>pluto_zips<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span>shape<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>)</span>
</code></pre></div>
<p data-v-71fe5848 data-v-71fe5848>After joining and displaying the shape of the data, you should see approximately 856879 rows and 101 columns.</p>
<p data-v-71fe5848 data-v-71fe5848>In order to classify buildings based on their height, we will use the <code data-v-71fe5848 data-v-71fe5848>numfloors</code> (number of floors) column to bucket them into 10 distinct categories. We will make use of the <a href="https://pandas.pydata.org/docs/reference/api/pandas.cut.html" rel="nofollow noopener noreferrer" target="_blank" data-v-71fe5848 data-v-71fe5848>Pandas</a> <code data-v-71fe5848 data-v-71fe5848>cut</code> function which segments values into bins. As with most datasets, there are a buildings with missing floor information, so we will remove those:</p>
<div class="nuxt-content-highlight" data-v-71fe5848 data-v-71fe5848><pre class="language-python line-numbers" data-v-71fe5848 data-v-71fe5848><code data-v-71fe5848 data-v-71fe5848><span class="token comment" data-v-71fe5848 data-v-71fe5848># remove rows without floor number information</span>
pluto_zips <span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span> pluto_zips<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>[</span>pluto_zips<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>[</span><span class="token string" data-v-71fe5848 data-v-71fe5848>'numfloors'</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>]</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span>notnull<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>(</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>)</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>]</span>

<span class="token comment" data-v-71fe5848 data-v-71fe5848># create buckets and bucket the data</span>
bins <span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span> <span class="token punctuation" data-v-71fe5848 data-v-71fe5848>[</span><span class="token number" data-v-71fe5848 data-v-71fe5848>0</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span> <span class="token number" data-v-71fe5848 data-v-71fe5848>1</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span> <span class="token number" data-v-71fe5848 data-v-71fe5848>2</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span> <span class="token number" data-v-71fe5848 data-v-71fe5848>4</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span> <span class="token number" data-v-71fe5848 data-v-71fe5848>5</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span> <span class="token number" data-v-71fe5848 data-v-71fe5848>6</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span> <span class="token number" data-v-71fe5848 data-v-71fe5848>10</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span> <span class="token number" data-v-71fe5848 data-v-71fe5848>15</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span> <span class="token number" data-v-71fe5848 data-v-71fe5848>20</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span> <span class="token number" data-v-71fe5848 data-v-71fe5848>40</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span> <span class="token number" data-v-71fe5848 data-v-71fe5848>110</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>]</span>
pluto_zips<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>[</span><span class="token string" data-v-71fe5848 data-v-71fe5848>'binned'</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>]</span> <span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span> pd<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span>cut<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>(</span>pluto_zips<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>[</span><span class="token string" data-v-71fe5848 data-v-71fe5848>'numfloors'</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>]</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span> bins<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>)</span>
</code></pre></div>
<p data-v-71fe5848 data-v-71fe5848>Here we created a new column, <code data-v-71fe5848 data-v-71fe5848>binned</code> that buckets the number of floors of a building with the intervals used in the <code data-v-71fe5848 data-v-71fe5848>bins</code> list.</p>
<p data-v-71fe5848 data-v-71fe5848>Next we will count the number of each category within every zipcode. To do this we will use the Pandas <code data-v-71fe5848 data-v-71fe5848>groupby</code> function to group rows by their <code data-v-71fe5848 data-v-71fe5848>region_id</code> and <code data-v-71fe5848 data-v-71fe5848>binned</code> category, then count the number of buildings. Afterwards we will use the <code data-v-71fe5848 data-v-71fe5848>pivot_table</code> function to transpose the dataframe so that the columns are the floor height categories, the indices are the zipcode names, and the values are the counts of each.</p>
<div class="nuxt-content-highlight" data-v-71fe5848 data-v-71fe5848><pre class="language-python line-numbers" data-v-71fe5848 data-v-71fe5848><code data-v-71fe5848 data-v-71fe5848><span class="token comment" data-v-71fe5848 data-v-71fe5848># group rows by the zipcode and binned columns,</span>
<span class="token comment" data-v-71fe5848 data-v-71fe5848># and count buildings within groups</span>
temp <span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span> pluto_zips<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span>groupby<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>(</span>
    <span class="token punctuation" data-v-71fe5848 data-v-71fe5848>[</span><span class="token string" data-v-71fe5848 data-v-71fe5848>'region_id'</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span> <span class="token string" data-v-71fe5848 data-v-71fe5848>'binned'</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>]</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>)</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>[</span><span class="token string" data-v-71fe5848 data-v-71fe5848>'bbl'</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>]</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span>count<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>(</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>)</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span>reset_index<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>(</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>)</span>

floor_vectors <span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span> pd<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span>pivot_table<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>(</span>temp<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span> index<span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span><span class="token string" data-v-71fe5848 data-v-71fe5848>'region_id'</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span>
                               columns<span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span><span class="token string" data-v-71fe5848 data-v-71fe5848>'binned'</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span>
                               values<span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span><span class="token string" data-v-71fe5848 data-v-71fe5848>'bbl'</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>)</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span>fillna<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>(</span><span class="token number" data-v-71fe5848 data-v-71fe5848>0</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>)</span>
</code></pre></div>
<p data-v-71fe5848 data-v-71fe5848>Now if you display the first 5 rows of the resulting <code data-v-71fe5848 data-v-71fe5848>floor_vectors</code> dataframe â€“ <code data-v-71fe5848 data-v-71fe5848>floor_vectors.head()</code> â€“ you should see:</p>
<br data-v-71fe5848 data-v-71fe5848>



















































































<table data-v-71fe5848 data-v-71fe5848><thead data-v-71fe5848 data-v-71fe5848><tr data-v-71fe5848 data-v-71fe5848><th align="center" data-v-71fe5848 data-v-71fe5848>region_id</th><th align="center" data-v-71fe5848 data-v-71fe5848><strong data-v-71fe5848 data-v-71fe5848>(0, 1]</strong></th><th align="center" data-v-71fe5848 data-v-71fe5848><strong data-v-71fe5848 data-v-71fe5848>(1, 2]</strong></th><th align="center" data-v-71fe5848 data-v-71fe5848><strong data-v-71fe5848 data-v-71fe5848>(2, 4]</strong></th><th align="center" data-v-71fe5848 data-v-71fe5848><strong data-v-71fe5848 data-v-71fe5848>(4, 5]</strong></th><th align="center" data-v-71fe5848 data-v-71fe5848><strong data-v-71fe5848 data-v-71fe5848>(5, 6]</strong></th><th align="center" data-v-71fe5848 data-v-71fe5848><strong data-v-71fe5848 data-v-71fe5848>(6, 10]</strong></th><th align="center" data-v-71fe5848 data-v-71fe5848><strong data-v-71fe5848 data-v-71fe5848>(10, 15]</strong></th><th align="center" data-v-71fe5848 data-v-71fe5848><strong data-v-71fe5848 data-v-71fe5848>(15, 20]</strong></th><th align="center" data-v-71fe5848 data-v-71fe5848><strong data-v-71fe5848 data-v-71fe5848>(20, 40]</strong></th><th align="center" data-v-71fe5848 data-v-71fe5848><strong data-v-71fe5848 data-v-71fe5848>(40, 110]</strong></th></tr></thead><tbody data-v-71fe5848 data-v-71fe5848><tr data-v-71fe5848 data-v-71fe5848><td align="center" data-v-71fe5848 data-v-71fe5848>07305</td><td align="center" data-v-71fe5848 data-v-71fe5848>0</td><td align="center" data-v-71fe5848 data-v-71fe5848>0</td><td align="center" data-v-71fe5848 data-v-71fe5848>0</td><td align="center" data-v-71fe5848 data-v-71fe5848>0</td><td align="center" data-v-71fe5848 data-v-71fe5848>0</td><td align="center" data-v-71fe5848 data-v-71fe5848>0</td><td align="center" data-v-71fe5848 data-v-71fe5848>0</td><td align="center" data-v-71fe5848 data-v-71fe5848>0</td><td align="center" data-v-71fe5848 data-v-71fe5848>0</td><td align="center" data-v-71fe5848 data-v-71fe5848>0</td></tr><tr data-v-71fe5848 data-v-71fe5848><td align="center" data-v-71fe5848 data-v-71fe5848>10001</td><td align="center" data-v-71fe5848 data-v-71fe5848>33</td><td align="center" data-v-71fe5848 data-v-71fe5848>36</td><td align="center" data-v-71fe5848 data-v-71fe5848>252</td><td align="center" data-v-71fe5848 data-v-71fe5848>110</td><td align="center" data-v-71fe5848 data-v-71fe5848>72</td><td align="center" data-v-71fe5848 data-v-71fe5848>80</td><td align="center" data-v-71fe5848 data-v-71fe5848>161</td><td align="center" data-v-71fe5848 data-v-71fe5848>59</td><td align="center" data-v-71fe5848 data-v-71fe5848>65</td><td align="center" data-v-71fe5848 data-v-71fe5848>23</td></tr><tr data-v-71fe5848 data-v-71fe5848><td align="center" data-v-71fe5848 data-v-71fe5848>10002</td><td align="center" data-v-71fe5848 data-v-71fe5848>63</td><td align="center" data-v-71fe5848 data-v-71fe5848>83</td><td align="center" data-v-71fe5848 data-v-71fe5848>302</td><td align="center" data-v-71fe5848 data-v-71fe5848>557</td><td align="center" data-v-71fe5848 data-v-71fe5848>373</td><td align="center" data-v-71fe5848 data-v-71fe5848>112</td><td align="center" data-v-71fe5848 data-v-71fe5848>43</td><td align="center" data-v-71fe5848 data-v-71fe5848>21</td><td align="center" data-v-71fe5848 data-v-71fe5848>19</td><td align="center" data-v-71fe5848 data-v-71fe5848>1</td></tr><tr data-v-71fe5848 data-v-71fe5848><td align="center" data-v-71fe5848 data-v-71fe5848>10003</td><td align="center" data-v-71fe5848 data-v-71fe5848>35</td><td align="center" data-v-71fe5848 data-v-71fe5848>43</td><td align="center" data-v-71fe5848 data-v-71fe5848>558</td><td align="center" data-v-71fe5848 data-v-71fe5848>514</td><td align="center" data-v-71fe5848 data-v-71fe5848>298</td><td align="center" data-v-71fe5848 data-v-71fe5848>196</td><td align="center" data-v-71fe5848 data-v-71fe5848>110</td><td align="center" data-v-71fe5848 data-v-71fe5848>49</td><td align="center" data-v-71fe5848 data-v-71fe5848>18</td><td align="center" data-v-71fe5848 data-v-71fe5848>0</td></tr><tr data-v-71fe5848 data-v-71fe5848><td align="center" data-v-71fe5848 data-v-71fe5848>10004</td><td align="center" data-v-71fe5848 data-v-71fe5848>4</td><td align="center" data-v-71fe5848 data-v-71fe5848>1</td><td align="center" data-v-71fe5848 data-v-71fe5848>20</td><td align="center" data-v-71fe5848 data-v-71fe5848>20</td><td align="center" data-v-71fe5848 data-v-71fe5848>4</td><td align="center" data-v-71fe5848 data-v-71fe5848>11</td><td align="center" data-v-71fe5848 data-v-71fe5848>5</td><td align="center" data-v-71fe5848 data-v-71fe5848>5</td><td align="center" data-v-71fe5848 data-v-71fe5848>27</td><td align="center" data-v-71fe5848 data-v-71fe5848>5</td></tr></tbody></table>
<br data-v-71fe5848 data-v-71fe5848>
<p data-v-71fe5848 data-v-71fe5848></p><div class="img" data-v-a1883e6c data-v-71fe5848><img src="/smorgasbord/_nuxt/img/bldg_floor_counts.3ee45cf.png#img-right" alt="missing-image" data-v-a1883e6c></div>
Here in the <code data-v-71fe5848 data-v-71fe5848>floor_vectors</code> dataframe we've created high dimensional vectors of zipcodes. Vectors here are similar to the vectors you may be used to from high school geometry. But rather than the 2 or 3 dimension vectors where the x, y, and z denote direction; the above vectors have 10 dimensions to denote their direction. Each building type can be thought of as a independent dimensions of a zipcode, and the values can be thought of as their magnitude in each. This is an important concept as it is what the K-means clustering algorithm will use to determine distances between zipcodes, and subsequently whether two or more zipcodes belong in the same cluster.<p></p>
<p data-v-71fe5848 data-v-71fe5848>We can make this more concrete by plotting the distribution of building types for two vastly different zipcodes. Zipcode <code data-v-71fe5848 data-v-71fe5848>11236</code>, Carnasie Brooklyn has thousands of 1-4 storey (residential) buildings, so the data is skewed left. While the <code data-v-71fe5848 data-v-71fe5848>10006</code> zipcode, Financial District Manhattan is skewed the other direction with mostly 20-40 storey buildings. As such, our K-means clustering algorithm will learn that the Financial District is more similar (closer in vector space) to neighborhoods like Midtown Manhattan (as there are similar distributions of high-rise buildings with few low-rise) than Carnasie, thus will most likely place FiDi + Midtown in the same cluster and have a separate cluster for Carnasie.</p>
<br data-v-71fe5848 data-v-71fe5848>
<p data-v-71fe5848 data-v-71fe5848>With an intuitive understanding in place, we can move on to clustering our data. We will begin by instantiating an instance of the K-Means clustering algorithm â€“ this is where you call the Scikit-learn <a href="https://scikit-learn.org/stable/modules/generated/sklearn.cluster.KMeans.html" rel="nofollow noopener noreferrer" target="_blank" data-v-71fe5848 data-v-71fe5848>KMeans</a> object and set the hyperparameters for the algorithm. The main parameters for any implementation of the k-means algorithm is the number of clusters you want to create â€“ here that parameter is called <code data-v-71fe5848 data-v-71fe5848>n_clusters</code>. For the purposes of this demo we will set that number to 5 (feel free to play around and see how the output changes as you increase/decrease that argument). There is an element of randomness to the initial location of the centroids for the clustering, so we will attempt to make our results reproducible / remove this randomness by setting the <code data-v-71fe5848 data-v-71fe5848>random_state</code> argument. Feel free to play around with other <a href="https://scikit-learn.org/stable/modules/generated/sklearn.cluster.KMeans.html" rel="nofollow noopener noreferrer" target="_blank" data-v-71fe5848 data-v-71fe5848>parameters</a> listed in the documentation to see their affects</p>
<div class="nuxt-content-highlight" data-v-71fe5848 data-v-71fe5848><pre class="language-python line-numbers" data-v-71fe5848 data-v-71fe5848><code data-v-71fe5848 data-v-71fe5848>km <span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span> KMeans<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>(</span>n_clusters<span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span><span class="token number" data-v-71fe5848 data-v-71fe5848>5</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span> random_state<span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span><span class="token number" data-v-71fe5848 data-v-71fe5848>42</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>)</span>
</code></pre></div>
<p data-v-71fe5848 data-v-71fe5848>The next step is to fit our algorithm on the floor_vectors dataframe using the sklearn <code data-v-71fe5848 data-v-71fe5848>.fit()</code> method. This is where the algorithm will segment the data into clusters. As our data is small this should only take a few seconds to process:</p>
<div class="nuxt-content-highlight" data-v-71fe5848 data-v-71fe5848><pre class="language-python line-numbers" data-v-71fe5848 data-v-71fe5848><code data-v-71fe5848 data-v-71fe5848>km<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span>fit<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>(</span>floor_vectors<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>)</span>
</code></pre></div>
<p data-v-71fe5848 data-v-71fe5848>Now we can call the <code data-v-71fe5848 data-v-71fe5848>.labels_</code> attribute to see the assigned cluster for every zipcode â€“ this returns an a list of numbers, where the numbers denote the names of the cluster from 0 up to 4 (remember we said to segment the data into 5 clusters and in Python counting starts from 0, hence 0-4).</p>
<div class="nuxt-content-highlight" data-v-71fe5848 data-v-71fe5848><pre class="language-python line-numbers" data-v-71fe5848 data-v-71fe5848><code data-v-71fe5848 data-v-71fe5848>km<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span>labels_

<span class="token comment" data-v-71fe5848 data-v-71fe5848># output</span>
array<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>(</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>[</span><span class="token number" data-v-71fe5848 data-v-71fe5848>0</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span> <span class="token number" data-v-71fe5848 data-v-71fe5848>0</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span> <span class="token number" data-v-71fe5848 data-v-71fe5848>0</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span> <span class="token number" data-v-71fe5848 data-v-71fe5848>0</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span> <span class="token number" data-v-71fe5848 data-v-71fe5848>0.</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>]</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span>
      dtype<span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span>int32<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>)</span>
</code></pre></div>
<p data-v-71fe5848 data-v-71fe5848>Next we'll create a map showing zipcodes colored with their assigned clusters. To do this we will create a temporary dataframe of cluster labels and zipcode IDs, in order to join this with the zipcode geometries:</p>
<div class="nuxt-content-highlight" data-v-71fe5848 data-v-71fe5848><pre class="language-python line-numbers" data-v-71fe5848 data-v-71fe5848><code data-v-71fe5848 data-v-71fe5848><span class="token comment" data-v-71fe5848 data-v-71fe5848># create temporary dataframe</span>
temp <span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span> pd<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span>DataFrame<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>(</span>
  <span class="token punctuation" data-v-71fe5848 data-v-71fe5848>{</span><span class="token string" data-v-71fe5848 data-v-71fe5848>'labels'</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>:</span> km<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span>labels_<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span>
   <span class="token string" data-v-71fe5848 data-v-71fe5848>'region_id'</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>:</span> floor_vectors<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span>index
   <span class="token punctuation" data-v-71fe5848 data-v-71fe5848>}</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>)</span>

<span class="token comment" data-v-71fe5848 data-v-71fe5848># merge with zipcode geometries</span>
cluster_map <span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span> zips<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span>merge<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>(</span>temp<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span> on<span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span><span class="token string" data-v-71fe5848 data-v-71fe5848>'region_id'</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>)</span>

<span class="token comment" data-v-71fe5848 data-v-71fe5848># remove weird zipcode off coast of Manhattan</span>
mask <span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span> <span class="token operator" data-v-71fe5848 data-v-71fe5848>~</span>cluster_map<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>[</span><span class="token string" data-v-71fe5848 data-v-71fe5848>'region_id'</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>]</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span><span class="token builtin" data-v-71fe5848 data-v-71fe5848>str</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span>startswith<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>(</span><span class="token string" data-v-71fe5848 data-v-71fe5848>'07'</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>)</span>

<span class="token comment" data-v-71fe5848 data-v-71fe5848># plot the cluster map</span>
fig<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span> ax <span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span> plt<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span>subplots<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>(</span><span class="token number" data-v-71fe5848 data-v-71fe5848>1</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span> figsize<span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>(</span><span class="token number" data-v-71fe5848 data-v-71fe5848>14</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span><span class="token number" data-v-71fe5848 data-v-71fe5848>8</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>)</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>)</span>
cluster_map<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>[</span>mask<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>]</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span>plot<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>(</span>column<span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span><span class="token string" data-v-71fe5848 data-v-71fe5848>'labels'</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span> figsize<span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>(</span><span class="token number" data-v-71fe5848 data-v-71fe5848>12</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span><span class="token number" data-v-71fe5848 data-v-71fe5848>12</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>)</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span> ax<span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span>ax<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span>
                       linewidth<span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span><span class="token number" data-v-71fe5848 data-v-71fe5848>.25</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span> edgecolor<span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span><span class="token string" data-v-71fe5848 data-v-71fe5848>'0.2'</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span>
                       categorical<span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span><span class="token boolean" data-v-71fe5848 data-v-71fe5848>True</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span> legend<span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span><span class="token boolean" data-v-71fe5848 data-v-71fe5848>True</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span> cmap<span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span><span class="token string" data-v-71fe5848 data-v-71fe5848>'Spectral'</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>)</span>
ax<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span>axis<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>(</span><span class="token string" data-v-71fe5848 data-v-71fe5848>'off'</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>)</span>
ax<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span>set_title<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>(</span><span class="token string" data-v-71fe5848 data-v-71fe5848>'Zipcode â€“ Building Type Clustering'</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span>fontsize<span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span><span class="token number" data-v-71fe5848 data-v-71fe5848>14</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>)</span>
plt<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span>tight_layout<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>(</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>)</span>
</code></pre></div>
<p data-v-71fe5848 data-v-71fe5848></p><div class="img" data-v-a1883e6c data-v-71fe5848><img src="/smorgasbord/_nuxt/img/nyc_cluster.7f3e048.png" alt="missing-image" data-v-a1883e6c></div><p></p>
<p data-v-71fe5848 data-v-71fe5848>As you can see the K-means algorithm has learnt that the majority of Manhattan, Williamsburg, Dumbo and the Bronx are the similar, while residential and commercial areas of Brooklyn and Queens are split, and Staten Island is almost a cluster on to itself. This makes sense when considering the density of building types and various zoning laws that exist across parts of the city.</p>
<p data-v-71fe5848 data-v-71fe5848>We can confirm this intuition by looking at aggregate statistics for each cluster. We can use the Pandas <code data-v-71fe5848 data-v-71fe5848>.groupby</code> method to group our dataset by cluster ID and take the average number of buildings in each category across zip codes:</p>
<div class="nuxt-content-highlight" data-v-71fe5848 data-v-71fe5848><pre class="language-python line-numbers" data-v-71fe5848 data-v-71fe5848><code data-v-71fe5848 data-v-71fe5848><span class="token comment" data-v-71fe5848 data-v-71fe5848># combine cluster labels and floor_vectors</span>
clusters <span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span> temp<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span>merge<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>(</span>floor_vectors<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span> on<span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span><span class="token string" data-v-71fe5848 data-v-71fe5848>'region_id'</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>)</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span>drop<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>(</span><span class="token string" data-v-71fe5848 data-v-71fe5848>'region_id'</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span> axis<span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span><span class="token number" data-v-71fe5848 data-v-71fe5848>1</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>)</span>

<span class="token comment" data-v-71fe5848 data-v-71fe5848># group by cluster labels and take the average number of</span>
<span class="token comment" data-v-71fe5848 data-v-71fe5848># floor number categories within each</span>
clusters<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span>groupby<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>(</span><span class="token string" data-v-71fe5848 data-v-71fe5848>'labels'</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>)</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span>mean<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>(</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>)</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span>T
</code></pre></div>
<br data-v-71fe5848 data-v-71fe5848>





















































<table data-v-71fe5848 data-v-71fe5848><thead data-v-71fe5848 data-v-71fe5848><tr data-v-71fe5848 data-v-71fe5848><th align="center" data-v-71fe5848 data-v-71fe5848><strong data-v-71fe5848 data-v-71fe5848>labels</strong></th><th align="center" data-v-71fe5848 data-v-71fe5848><strong data-v-71fe5848 data-v-71fe5848>0</strong></th><th align="center" data-v-71fe5848 data-v-71fe5848><strong data-v-71fe5848 data-v-71fe5848>1</strong></th><th align="center" data-v-71fe5848 data-v-71fe5848><strong data-v-71fe5848 data-v-71fe5848>2</strong></th><th align="center" data-v-71fe5848 data-v-71fe5848><strong data-v-71fe5848 data-v-71fe5848>3</strong></th><th align="center" data-v-71fe5848 data-v-71fe5848><strong data-v-71fe5848 data-v-71fe5848>4</strong></th></tr></thead><tbody data-v-71fe5848 data-v-71fe5848><tr data-v-71fe5848 data-v-71fe5848><td align="center" data-v-71fe5848 data-v-71fe5848>(0, 1]</td><td align="center" data-v-71fe5848 data-v-71fe5848>69.672131</td><td align="center" data-v-71fe5848 data-v-71fe5848>955.714286</td><td align="center" data-v-71fe5848 data-v-71fe5848>2452.4</td><td align="center" data-v-71fe5848 data-v-71fe5848>484.583333</td><td align="center" data-v-71fe5848 data-v-71fe5848>313.566667</td></tr><tr data-v-71fe5848 data-v-71fe5848><td align="center" data-v-71fe5848 data-v-71fe5848>(1, 2]</td><td align="center" data-v-71fe5848 data-v-71fe5848>234.336066</td><td align="center" data-v-71fe5848 data-v-71fe5848>6213.571429</td><td align="center" data-v-71fe5848 data-v-71fe5848>11855.4</td><td align="center" data-v-71fe5848 data-v-71fe5848>3059.472222</td><td align="center" data-v-71fe5848 data-v-71fe5848>2671.100000</td></tr><tr data-v-71fe5848 data-v-71fe5848><td align="center" data-v-71fe5848 data-v-71fe5848>(2, 4]</td><td align="center" data-v-71fe5848 data-v-71fe5848>322.540984</td><td align="center" data-v-71fe5848 data-v-71fe5848>2013.250000</td><td align="center" data-v-71fe5848 data-v-71fe5848>3002.0</td><td align="center" data-v-71fe5848 data-v-71fe5848>1168.027778</td><td align="center" data-v-71fe5848 data-v-71fe5848>3126.433333</td></tr><tr data-v-71fe5848 data-v-71fe5848><td align="center" data-v-71fe5848 data-v-71fe5848>(4, 5]</td><td align="center" data-v-71fe5848 data-v-71fe5848>119.385246</td><td align="center" data-v-71fe5848 data-v-71fe5848>12.857143</td><td align="center" data-v-71fe5848 data-v-71fe5848>8.4</td><td align="center" data-v-71fe5848 data-v-71fe5848>17.583333</td><td align="center" data-v-71fe5848 data-v-71fe5848>57.566667</td></tr><tr data-v-71fe5848 data-v-71fe5848><td align="center" data-v-71fe5848 data-v-71fe5848>(5, 6]</td><td align="center" data-v-71fe5848 data-v-71fe5848>65.885246</td><td align="center" data-v-71fe5848 data-v-71fe5848>33.357143</td><td align="center" data-v-71fe5848 data-v-71fe5848>6.4</td><td align="center" data-v-71fe5848 data-v-71fe5848>34.722222</td><td align="center" data-v-71fe5848 data-v-71fe5848>80.033333</td></tr></tbody></table>
<br data-v-71fe5848 data-v-71fe5848>
<p data-v-71fe5848 data-v-71fe5848></p><div class="img" data-v-a1883e6c data-v-71fe5848><img src="/smorgasbord/_nuxt/img/cluster_proportions.945de32.png#img-right" alt="missing-image" data-v-a1883e6c></div>
We can now plot the average proportion of each building category within each cluster using Pandas' plot method:<p></p>
<div class="nuxt-content-highlight" data-v-71fe5848 data-v-71fe5848><pre class="language-python line-numbers" data-v-71fe5848 data-v-71fe5848><code data-v-71fe5848 data-v-71fe5848>averages <span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span> clusters<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span>groupby<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>(</span><span class="token string" data-v-71fe5848 data-v-71fe5848>'labels'</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>)</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span>mean<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>(</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>)</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span>T

totals <span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span> clusters<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span>groupby<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>(</span><span class="token string" data-v-71fe5848 data-v-71fe5848>'labels'</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>)</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span>mean<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>(</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>)</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span><span class="token builtin" data-v-71fe5848 data-v-71fe5848>sum</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>(</span>axis<span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span><span class="token number" data-v-71fe5848 data-v-71fe5848>1</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>)</span>

proportions <span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span> averages <span class="token operator" data-v-71fe5848 data-v-71fe5848>/</span> totals
proportions<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span>plot<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>(</span>kind<span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span><span class="token string" data-v-71fe5848 data-v-71fe5848>'bar'</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span> width<span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span><span class="token number" data-v-71fe5848 data-v-71fe5848>0.75</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span> cmap<span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span><span class="token string" data-v-71fe5848 data-v-71fe5848>'Spectral'</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span>
                 alpha<span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span><span class="token number" data-v-71fe5848 data-v-71fe5848>0.75</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span> edgecolor<span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span><span class="token string" data-v-71fe5848 data-v-71fe5848>'black'</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>)</span>
plt<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span>legend<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>(</span>title<span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span><span class="token string" data-v-71fe5848 data-v-71fe5848>'clusters'</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>)</span>
plt<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span>xlabel<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>(</span><span class="token string" data-v-71fe5848 data-v-71fe5848>'Number of floors'</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>)</span>
plt<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span>ylabel<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>(</span><span class="token string" data-v-71fe5848 data-v-71fe5848>'Proportion'</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>)</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>;</span>
</code></pre></div>
<br data-v-71fe5848 data-v-71fe5848>
<p data-v-71fe5848 data-v-71fe5848>In the next module we will add interactivity to the map in order to be able to interrogate the results better.</p>
<h2 id="challenge" data-v-71fe5848 data-v-71fe5848><a href="#challenge" aria-hidden="true" tabindex="-1" data-v-71fe5848 data-v-71fe5848><span class="icon icon-link" data-v-71fe5848 data-v-71fe5848></span></a>Challenge</h2>
<p data-v-71fe5848 data-v-71fe5848></p><div class="img" data-v-a1883e6c data-v-71fe5848><img src="/smorgasbord/_nuxt/img/nyc_clusters.850e58e.gif" alt="missing-image" data-v-a1883e6c></div><p></p>
<p data-v-71fe5848 data-v-71fe5848>The above image was created using a Python loop to plot different clustering results when changing the number of K in the K-means clustering. Complete the below code to produce your own series of images and then use photoshop, keynote, or any other image editing softwaree to make your own gif:</p>
<div class="nuxt-content-highlight" data-v-71fe5848 data-v-71fe5848><pre class="language-python line-numbers" data-v-71fe5848 data-v-71fe5848><code data-v-71fe5848 data-v-71fe5848><span class="token keyword" data-v-71fe5848 data-v-71fe5848>for</span> i <span class="token keyword" data-v-71fe5848 data-v-71fe5848>in</span> <span class="token builtin" data-v-71fe5848 data-v-71fe5848>range</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>(</span><span class="token number" data-v-71fe5848 data-v-71fe5848>2</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span> <span class="token number" data-v-71fe5848 data-v-71fe5848>13</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>)</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>:</span>
  <span class="token comment" data-v-71fe5848 data-v-71fe5848># your code should go here</span>

  <span class="token comment" data-v-71fe5848 data-v-71fe5848># this line saves an image</span>
  plt<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span>savefig<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>(</span><span class="token string" data-v-71fe5848 data-v-71fe5848>'data/images/nyc_cluster_{}.png'</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>.</span><span class="token builtin" data-v-71fe5848 data-v-71fe5848>format</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>(</span>i<span class="token punctuation" data-v-71fe5848 data-v-71fe5848>)</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>,</span> dpi<span class="token operator" data-v-71fe5848 data-v-71fe5848>=</span><span class="token number" data-v-71fe5848 data-v-71fe5848>150</span><span class="token punctuation" data-v-71fe5848 data-v-71fe5848>)</span>
</code></pre></div>
<style data-v-71fe5848 data-v-71fe5848>span.math{position:relative;font-size:2.5em;display:inline-block;line-height:.7em;vertical-align:middle}span.math:before{font-size:12px;display:block;top:0;content:&quot;text-align:center}span.math:after{font-size:12px;display:block;bottom:0;content:&quot;text-align:center}</style></div></div> <div class="postfooter" data-v-71fe5848></div></div></div><div class="copyright" data-v-2354a23f><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" data-v-2354a23f><img alt="Creative Commons License" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png" style="border-width:0" data-v-2354a23f></a><br data-v-2354a23f>This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" data-v-2354a23f>Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.
</div></div> <div id="graph-column"><div data-fetch-key="data-v-9c60a860:0" class="graph" data-v-9c60a860>
  [] 
</div></div></div></div></div><script defer src="/smorgasbord/_nuxt/static/1652321291/modules/10-spatial-python/105-spatial-analysis-clustering/state.js"></script><script src="/smorgasbord/_nuxt/b24fb8c.js" defer></script><script src="/smorgasbord/_nuxt/0635aab.js" defer></script><script src="/smorgasbord/_nuxt/c651e03.js" defer></script><script src="/smorgasbord/_nuxt/2d8db30.js" defer></script><script src="/smorgasbord/_nuxt/c7b5db0.js" defer></script><script src="/smorgasbord/_nuxt/8d5d7f8.js" defer></script>
  </body>
</html>
